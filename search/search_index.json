{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"welcome to deep bullshit \u63a2\u7d22\u8ba1\u7b97\u673a\u79d1\u5b66\u7684\u4e0b\u754c","title":"Welcome"},{"location":"#welcome-to-deep-bullshit","text":"\u63a2\u7d22\u8ba1\u7b97\u673a\u79d1\u5b66\u7684\u4e0b\u754c","title":"welcome to deep bullshit"},{"location":"6.824 Distributed Systems Engineering/","text":"6.824: Distributed Systems Engineering Lab2: Raft \u4f7f\u7528\u7684\u662f 2018 Spring \u7684 raft lab \u7248\u672c \u6458\u8981\uff1a\u672c\u6587\u7b80\u5355\u5199\u4e00\u4e2a\u5b8c\u6210 6.824 lab 2 \u7684\u4e00\u4e9b\u611f\u53d7\uff0c\u5e76\u7b80\u5355\u8bf4\u4e00\u4e0b\u5b9e\u73b0raft\u7684\u96be\u70b9\u548c\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\u3002\u90e8\u5206\u5730\u65b9\u4f1a\u53c2\u8003 Student's Guide to Raft \uff0c\u5927\u90e8\u5206\u8d44\u6599\u6765\u81ea Raft Paper \uff0c\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u53ef\u89c6\u5316 \u6559\u7a0b \uff0c\u4e00\u4e2a\u5b98\u65b9\u7684 Raft Visualization \u3002 \u611f\u53d7 \u8fd9\u4e2aLab\u6bd4\u4e4b\u524d\u7684mapreduce lab \u96be\u4e86\u5f88\u591a\uff0c\u5de5\u4f5c\u91cf\u4e5f\u589e\u52a0\u4e86\u5f88\u591a\uff0c\u5c3d\u7ba1\u4ee3\u7801\u603b\u91cf\u4e0d\u662f\u975e\u5e38\u591a\uff0c\u4f46\u662f\u8c03\u8bd5\u5de5\u4f5c\u8981\u8fdb\u884c\u975e\u5e38\u591a\u7684\u65f6\u95f4\uff0c\u751a\u81f3\u5360\u6574\u4e2alab 80%\u4ee5\u4e0a\u7684\u65f6\u95f4\u3002\u6211\u7b2c\u4e00\u6b21\u5c1d\u8bd5\u65f6\uff0c\u82b1\u4e86\u4e24\u5929\u5b8c\u6210\u4e86Test 2A\uff0c\u7136\u540e\u4e00\u5929\u534a\u82b1\u5728\u4e86Test 2B\uff0c\u4f46\u662fTest 2B\u8fd8\u662f\u6709\u4e00\u4e2a\u5c0f\u7684\u90e8\u5206\u6ca1\u8fc7\uff0c\u52a0\u4e0a\u7b2c\u4e00\u6b21\u5199\u7684\u65f6\u5019\u4ee3\u7801\u975e\u5e38\u4e11\u964b\uff0c\u5bf9Golang\u4e5f\u4e0d\u662f\u5f88\u719f\u6089\uff0c\u4e8e\u662f\u5148\u653e\u4e86\u4e00\u653e\u3002 \u5b9e\u9a8c\u6307\u5bfc\u8fd9\u4e48\u8bf4 Your first implementation may not be clean enough that you can easily reason about its correctness. Give yourself enough time to rewrite your implementation so that you can easily reason about its correctness. Subsequent labs will build on this lab, so it is important to do a good job on your implementation. \u6240\u4ee5\u5728\u4e00\u5468\u540e\u8fdb\u884c\u4e86\u91cd\u5199\uff0c\u4e5f\u5c31\u662f\u73b0\u5728\u770b\u5230\u7684\u7ed3\u679c\u3002 \u91cd\u5199\u76f8\u5bf9\u6bd4\u8f83\u987a\u5229\uff0c\u4e00\u5929\u65f6\u95f4\u5b8c\u6210\u4e86Test 2A\uff0c\u7b2c\u4e8c\u5929\u5b8c\u6210\u4e86Test 2B\u3001Test 2C\uff0c\u4ee3\u7801\u7ed3\u6784\u4e5f\u53d8\u5f97\u66f4\u4e3a\u6e05\u6670\uff0c\u4e0d\u8fc7\u4ecd\u7136\u662f\u5c06\u8fd180%\u7684\u65f6\u95f4\u82b1\u5728\u4e86\u8c03\u8bd5\u4e0a\u3002\u5728\u5199\u8fd9\u7bc7\u6587\u7ae0\u524d\u53c8\u91cd\u8bfb\u4e86 Student's Guide to Raft \uff0c\u53d1\u73b0\u786e\u5b9e\u5f88\u591a\u5751\u90fd\u8e29\u4e0a\u4e86\uff0c\u6240\u4ee5\u5728\u5b9e\u73b0\u65f6\u8fd8\u662f\u8981\u597d\u597d\u8bfb\u8fd9\u7bc7\u6587\u7ae0\u3002 \u5b9e\u9a8c\u6307\u5bfc\u4e66\u8981\u6c42\u6700\u7ec8\u4e09\u4e2aTest\u603b\u65f6\u95f4\u4e0d\u80fd\u8d85\u8fc74\u5206\u949f\uff0c\u6211\u7684\u5b9e\u73b0\u6700\u7ec8\u82b1\u4e862\u5206\u591a\u949f\u8dd1\u5b8c\u4e86\u3002 $ go test -run 2 Test ( 2A ) : initial election ... labgob warning: Decoding into a non-default variable/field Index may not work ... Passed -- 3 .0 3 118 0 Test ( 2A ) : election after network failure ... ... Passed -- 4 .6 3 256 0 Test ( 2B ) : basic agreement ... ... Passed -- 0 .5 5 32 3 Test ( 2B ) : agreement despite follower disconnection ... ... Passed -- 5 .8 3 240 8 Test ( 2B ) : no agreement if too many followers disconnect ... ... Passed -- 3 .4 5 380 3 Test ( 2B ) : concurrent Start () s ... ... Passed -- 0 .7 3 22 6 Test ( 2B ) : rejoin of partitioned leader ... ... Passed -- 5 .9 3 350 4 Test ( 2B ) : leader backs up quickly over incorrect follower logs ... ... Passed -- 15 .4 5 2627 102 Test ( 2B ) : RPC counts aren ' t too high ... ... Passed -- 2 .2 3 84 12 Test ( 2C ) : basic persistence ... ... Passed -- 3 .4 3 130 6 Test ( 2C ) : more persistence ... ... Passed -- 16 .9 5 1840 17 Test ( 2C ) : partitioned leader and one follower crash, leader restarts ... ... Passed -- 2 .9 3 68 4 Test ( 2C ) : Figure 8 ... ... Passed -- 31 .8 5 1719 15 Test ( 2C ) : unreliable agreement ... ... Passed -- 5 .5 5 424 246 Test ( 2C ) : Figure 8 ( unreliable ) ... ... Passed -- 28 .7 5 5300 42 Test ( 2C ) : churn ... ... Passed -- 16 .4 5 2140 155 Test ( 2C ) : unreliable churn ... ... Passed -- 16 .4 5 1863 215 PASS ok raft 164 .123s \u96be\u70b9\u548c\u5751\u70b9 From THE GUILD In fact, Figure 2 is extremely precise, and every single statement it makes should be treated, in specification terms, as MUST , not as SHOULD . For example, you might reasonably reset a peer\u2019s election timer whenever you receive an AppendEntries or RequestVote RPC, as both indicate that some other peer either thinks it\u2019s the leader, or is trying to become the leader. Intuitively, this means that we shouldn\u2019t be interfering. However, if you read Figure 2 carefully, it says: \u867d\u7136\u8bf4\u8bba\u6587\u4e2dFigure 2\u8bb2\u7684\u6bd4\u8f83\u8be6\u7ec6\uff0c\u4f46\u662f\u4ecd\u7136\u6709\u51e0\u70b9\u4e0d\u8db3\u3002\u7b2c\u4e00\uff0c\u6ca1\u6709\u6db5\u76d6\u6240\u6709\u7ec6\u8282\uff0c\u6bd4\u5982\u4f55\u5b9a\u4e49log \u662f\u4e0d\u662f up-to-date\u7b49\u7b49\u3002\u7b2c\u4e8c\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u7684\u8981\u6c42\u90fd\u96c6\u4e2d\u5728\u4e00\u4e2aSection\u4e2d\uff0c\u6bd4\u5982\u5728\u5b9e\u73b0RequestVote RPC\u6216\u8005 AppendEntries RPC\u65f6\uff0c\u4f60\u4e0d\u4ec5\u4ec5\u8981\u8003\u8651\u8fd9\u4e24\u4e2aRPC\u7684\u8981\u6c42\uff0c\u8fd8\u8981\u8003\u8651\u53d1\u9001\u8005\u6216\u63a5\u53d7\u8005\u4f5c\u4e3a\"follwer, candidate, leader\"\u7684\u533a\u522b\uff0c\u6bcf\u4e00\u79cd\u5c5e\u6027\u90fd\u6709\u4e0d\u540c\u7684\u8981\u6c42\uff0c\u540c\u65f6\u5bf9\u4e8e\u4e09\u79cd\u8eab\u4efd\u8fd8\u6709\u5171\u540c\u7684\u8981\u6c42\u3002 \u7b2c\u4e09\uff0c\u56fe2\u5e76\u6ca1\u6709\u8bb2\u6e05\u695a\u6240\u6709\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5177\u4f53\u5b9e\u73b0\u65f6\u5019\u9700\u8981\u589e\u52a0\u5f88\u591a\u5c5e\u6027\uff0c\u51b3\u5b9a\u67d0\u4e9b\u5c5e\u6027\u7684\u7c7b\u578b\u3002 If commitIndex > lastApplied at any point during execution, you should apply a particular log entry. It is not crucial that you do it straight away (for example, in the AppendEntries RPC handler), but it is important that you ensure that this application is only done by one entity. Specifically, you will need to either have a dedicated \u201capplier\u201d, or to lock around these applies, so that some other routine doesn\u2019t also detect that entries need to be applied and also tries to apply. \u8bba\u6587\u91cc\u5e76\u6ca1\u6709\u8c08\u5230\u5982\u4f55\u53bbapply log\uff0c\u4e8b\u5b9e\u4e0a\u5728\u5b9e\u73b0\u65f6\u9700\u8981\u5728Go\u4e2d\u65b0\u5f00\u4e00\u4e2a\u7ebf\u7a0b\u6765\u63d0\u4ea4log\uff0c\u8fd9\u4e2a\u5f80\u5f80\u4f1a\u5728\u521a\u5f00\u59cb\u65f6\u9020\u6210\u56f0\u96be If a leader sends out an AppendEntries RPC, and it is rejected, but not because of log inconsistency (this can only happen if our term has passed), then you should immediately step down, and not update nextIndex . If you do, you could race with the resetting of nextIndex if you are re-elected immediately. \u8fd9\u4e5f\u662f\u6211\u540e\u671f\u53d1\u73b0\u7684\u4e00\u4e2a\u5c0f\u95ee\u9898\uff0cAE RPC\u8fd4\u56deFalse\u5e76\u4e0d\u4e00\u5b9a\u662flog\u4e0dmatch\uff0c\u8fd8\u6709\u53ef\u80fd\u662f\u8fd9\u8f6e\u5df2\u7ecf\u7ed3\u675f\u4e86\uff0c\u6240\u4ee5\u4e0d\u8981\u770b\u5230false\u5c31nextIndex -= 1\u3002 A leader is not allowed to update commitIndex to somewhere in a previous term (or, for that matter, a future term). Thus, as the rule says, you specifically need to check that log[N].term == currentTerm . This is because Raft leaders cannot be sure an entry is actually committed (and will not ever be changed in the future) if it\u2019s not from their current term. This is illustrated by Figure 8 in the paper. \u8fd9\u4e2a\u4e5f\u662f\u540e\u671f\u53d1\u73b0\u7684\u4e00\u4e2a\u5927\u95ee\u9898\uff0c\u8bba\u6587\u56fe2\u6709\u63d0\u4f46\u662f\u975e\u5e38\u5bb9\u6613\u88ab\u5ffd\u89c6\uff0c\u8bba\u6587\u5728P8-P9\u9875\u8bf4\u660e\u4e86\u8fd9\u4e2a\u7ec6\u8282\uff1a\u4e3a\u4e86\u907f\u514d\u51fa\u73b0\u56fe 8 \u90a3\u6837\u7684\u60c5\u51b5\uff0cleader\u53ea\u5141\u8bb8commit\u5f53\u524d\u8f6e\u6b21\u7684log From Practice \u4f60\u7b2c\u4e00\u6b21\u5b9e\u73b0\u7684\u4ee3\u7801\uff0c\u5fc5\u7136\u662f\u9760\u60f3\u8c61\u7684\u591a\uff0c\u5927\u90e8\u5206\u662f\u6ca1\u6709\u4e25\u683c\u6309\u7167\u8bba\u6587\u6765\u7684\uff0c\u5c31\u7b97\u957f\u65f6\u95f4\u8c03\u8bd5\u4e0d\u51fa\u6765\u4e5f\u662f\u975e\u5e38\u6b63\u5e38\u7684\u3002\u5728\u540e\u7eed\u7684\u6bcf\u4e00\u6b21\u91cd\u5199/\u4fee\u6539\u540e\uff0c\u4f60\u7684\u4ee3\u7801\u4f1a\u6e10\u6e10\u7b26\u5408\u8bba\u6587\u4e2d\u63cf\u8ff0\u7684\u6837\u5b50\uff0c\u4f46\u662f\u4ecd\u7136\u4f1a\u6709\u5c0f\u7684\u95ee\u9898\u5076\u5c14\u51fa\u73b0\u3002\u6700\u7ec8\u5e94\u8be5\u662f\u548c\u8bba\u6587\u4e2d\u6bcf\u4e00\u4e2a\u5c0f\u7ec6\u8282\u90fd\u6ce8\u610f\u5230\u4e86\uff0c\u4ee3\u7801\u4e5f\u6bd4\u7b2c\u4e00\u6b21\u5b8c\u6210\u7684\u4ee3\u7801\u90fd\u4e86\u4e00\u500d\uff0c\u56e0\u4e3a\u8003\u8651\u4e86\u5f88\u591a\u5c0f\u7ec6\u8282\uff0c\u52a0\u4e86\u5f88\u591a\u8c03\u8bd5\u4ee3\u7801\uff0c\u597d\u5728 util.go \u4e2d\u7684 DPrintf \u975e\u5e38\u597d\u7528\u3002 \u53e6\u5916\uff0c\u719f\u6089 Golang \u975e\u5e38\u91cd\u8981\uff0c\u8fd9\u4efd Go tour \u975e\u5e38\u597d\u7528\uff0c\u7a0d\u5fae\u4f1a\u70b9C/C++\u8bfb\u5b8c\u57fa\u672c\u5c31\u8fbe\u5230\u53ef\u4ee5\u5b9e\u73b0Lab 2\u7684\u5730\u6b65\u4e86\uff0c\u4e0d\u8fc7\u5982\u679c\u4f60\u5df2\u7ecf\u505a\u8fc7 Lab 1- MapReduce \uff0c\u90a3\u4e48\u4f60\u5e94\u8be5\u5df2\u7ecf\u5bf9Go\u6bd4\u8f83\u719f\u6089\u4e86\u3002 \u65f6\u95f4 \u5199\u4e8e2019\u5e7411\u67084\u65e5","title":"6.824 Lab2"},{"location":"6.824 Distributed Systems Engineering/#6824-distributed-systems-engineering","text":"","title":"6.824: Distributed Systems Engineering"},{"location":"6.824 Distributed Systems Engineering/#lab2-raft","text":"\u4f7f\u7528\u7684\u662f 2018 Spring \u7684 raft lab \u7248\u672c \u6458\u8981\uff1a\u672c\u6587\u7b80\u5355\u5199\u4e00\u4e2a\u5b8c\u6210 6.824 lab 2 \u7684\u4e00\u4e9b\u611f\u53d7\uff0c\u5e76\u7b80\u5355\u8bf4\u4e00\u4e0b\u5b9e\u73b0raft\u7684\u96be\u70b9\u548c\u9700\u8981\u6ce8\u610f\u7684\u5730\u65b9\u3002\u90e8\u5206\u5730\u65b9\u4f1a\u53c2\u8003 Student's Guide to Raft \uff0c\u5927\u90e8\u5206\u8d44\u6599\u6765\u81ea Raft Paper \uff0c\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u53ef\u89c6\u5316 \u6559\u7a0b \uff0c\u4e00\u4e2a\u5b98\u65b9\u7684 Raft Visualization \u3002","title":"Lab2: Raft"},{"location":"6.824 Distributed Systems Engineering/#_1","text":"\u8fd9\u4e2aLab\u6bd4\u4e4b\u524d\u7684mapreduce lab \u96be\u4e86\u5f88\u591a\uff0c\u5de5\u4f5c\u91cf\u4e5f\u589e\u52a0\u4e86\u5f88\u591a\uff0c\u5c3d\u7ba1\u4ee3\u7801\u603b\u91cf\u4e0d\u662f\u975e\u5e38\u591a\uff0c\u4f46\u662f\u8c03\u8bd5\u5de5\u4f5c\u8981\u8fdb\u884c\u975e\u5e38\u591a\u7684\u65f6\u95f4\uff0c\u751a\u81f3\u5360\u6574\u4e2alab 80%\u4ee5\u4e0a\u7684\u65f6\u95f4\u3002\u6211\u7b2c\u4e00\u6b21\u5c1d\u8bd5\u65f6\uff0c\u82b1\u4e86\u4e24\u5929\u5b8c\u6210\u4e86Test 2A\uff0c\u7136\u540e\u4e00\u5929\u534a\u82b1\u5728\u4e86Test 2B\uff0c\u4f46\u662fTest 2B\u8fd8\u662f\u6709\u4e00\u4e2a\u5c0f\u7684\u90e8\u5206\u6ca1\u8fc7\uff0c\u52a0\u4e0a\u7b2c\u4e00\u6b21\u5199\u7684\u65f6\u5019\u4ee3\u7801\u975e\u5e38\u4e11\u964b\uff0c\u5bf9Golang\u4e5f\u4e0d\u662f\u5f88\u719f\u6089\uff0c\u4e8e\u662f\u5148\u653e\u4e86\u4e00\u653e\u3002 \u5b9e\u9a8c\u6307\u5bfc\u8fd9\u4e48\u8bf4 Your first implementation may not be clean enough that you can easily reason about its correctness. Give yourself enough time to rewrite your implementation so that you can easily reason about its correctness. Subsequent labs will build on this lab, so it is important to do a good job on your implementation. \u6240\u4ee5\u5728\u4e00\u5468\u540e\u8fdb\u884c\u4e86\u91cd\u5199\uff0c\u4e5f\u5c31\u662f\u73b0\u5728\u770b\u5230\u7684\u7ed3\u679c\u3002 \u91cd\u5199\u76f8\u5bf9\u6bd4\u8f83\u987a\u5229\uff0c\u4e00\u5929\u65f6\u95f4\u5b8c\u6210\u4e86Test 2A\uff0c\u7b2c\u4e8c\u5929\u5b8c\u6210\u4e86Test 2B\u3001Test 2C\uff0c\u4ee3\u7801\u7ed3\u6784\u4e5f\u53d8\u5f97\u66f4\u4e3a\u6e05\u6670\uff0c\u4e0d\u8fc7\u4ecd\u7136\u662f\u5c06\u8fd180%\u7684\u65f6\u95f4\u82b1\u5728\u4e86\u8c03\u8bd5\u4e0a\u3002\u5728\u5199\u8fd9\u7bc7\u6587\u7ae0\u524d\u53c8\u91cd\u8bfb\u4e86 Student's Guide to Raft \uff0c\u53d1\u73b0\u786e\u5b9e\u5f88\u591a\u5751\u90fd\u8e29\u4e0a\u4e86\uff0c\u6240\u4ee5\u5728\u5b9e\u73b0\u65f6\u8fd8\u662f\u8981\u597d\u597d\u8bfb\u8fd9\u7bc7\u6587\u7ae0\u3002 \u5b9e\u9a8c\u6307\u5bfc\u4e66\u8981\u6c42\u6700\u7ec8\u4e09\u4e2aTest\u603b\u65f6\u95f4\u4e0d\u80fd\u8d85\u8fc74\u5206\u949f\uff0c\u6211\u7684\u5b9e\u73b0\u6700\u7ec8\u82b1\u4e862\u5206\u591a\u949f\u8dd1\u5b8c\u4e86\u3002 $ go test -run 2 Test ( 2A ) : initial election ... labgob warning: Decoding into a non-default variable/field Index may not work ... Passed -- 3 .0 3 118 0 Test ( 2A ) : election after network failure ... ... Passed -- 4 .6 3 256 0 Test ( 2B ) : basic agreement ... ... Passed -- 0 .5 5 32 3 Test ( 2B ) : agreement despite follower disconnection ... ... Passed -- 5 .8 3 240 8 Test ( 2B ) : no agreement if too many followers disconnect ... ... Passed -- 3 .4 5 380 3 Test ( 2B ) : concurrent Start () s ... ... Passed -- 0 .7 3 22 6 Test ( 2B ) : rejoin of partitioned leader ... ... Passed -- 5 .9 3 350 4 Test ( 2B ) : leader backs up quickly over incorrect follower logs ... ... Passed -- 15 .4 5 2627 102 Test ( 2B ) : RPC counts aren ' t too high ... ... Passed -- 2 .2 3 84 12 Test ( 2C ) : basic persistence ... ... Passed -- 3 .4 3 130 6 Test ( 2C ) : more persistence ... ... Passed -- 16 .9 5 1840 17 Test ( 2C ) : partitioned leader and one follower crash, leader restarts ... ... Passed -- 2 .9 3 68 4 Test ( 2C ) : Figure 8 ... ... Passed -- 31 .8 5 1719 15 Test ( 2C ) : unreliable agreement ... ... Passed -- 5 .5 5 424 246 Test ( 2C ) : Figure 8 ( unreliable ) ... ... Passed -- 28 .7 5 5300 42 Test ( 2C ) : churn ... ... Passed -- 16 .4 5 2140 155 Test ( 2C ) : unreliable churn ... ... Passed -- 16 .4 5 1863 215 PASS ok raft 164 .123s","title":"\u611f\u53d7"},{"location":"6.824 Distributed Systems Engineering/#_2","text":"","title":"\u96be\u70b9\u548c\u5751\u70b9"},{"location":"6.824 Distributed Systems Engineering/#from-the-guild","text":"In fact, Figure 2 is extremely precise, and every single statement it makes should be treated, in specification terms, as MUST , not as SHOULD . For example, you might reasonably reset a peer\u2019s election timer whenever you receive an AppendEntries or RequestVote RPC, as both indicate that some other peer either thinks it\u2019s the leader, or is trying to become the leader. Intuitively, this means that we shouldn\u2019t be interfering. However, if you read Figure 2 carefully, it says: \u867d\u7136\u8bf4\u8bba\u6587\u4e2dFigure 2\u8bb2\u7684\u6bd4\u8f83\u8be6\u7ec6\uff0c\u4f46\u662f\u4ecd\u7136\u6709\u51e0\u70b9\u4e0d\u8db3\u3002\u7b2c\u4e00\uff0c\u6ca1\u6709\u6db5\u76d6\u6240\u6709\u7ec6\u8282\uff0c\u6bd4\u5982\u4f55\u5b9a\u4e49log \u662f\u4e0d\u662f up-to-date\u7b49\u7b49\u3002\u7b2c\u4e8c\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u7684\u8981\u6c42\u90fd\u96c6\u4e2d\u5728\u4e00\u4e2aSection\u4e2d\uff0c\u6bd4\u5982\u5728\u5b9e\u73b0RequestVote RPC\u6216\u8005 AppendEntries RPC\u65f6\uff0c\u4f60\u4e0d\u4ec5\u4ec5\u8981\u8003\u8651\u8fd9\u4e24\u4e2aRPC\u7684\u8981\u6c42\uff0c\u8fd8\u8981\u8003\u8651\u53d1\u9001\u8005\u6216\u63a5\u53d7\u8005\u4f5c\u4e3a\"follwer, candidate, leader\"\u7684\u533a\u522b\uff0c\u6bcf\u4e00\u79cd\u5c5e\u6027\u90fd\u6709\u4e0d\u540c\u7684\u8981\u6c42\uff0c\u540c\u65f6\u5bf9\u4e8e\u4e09\u79cd\u8eab\u4efd\u8fd8\u6709\u5171\u540c\u7684\u8981\u6c42\u3002 \u7b2c\u4e09\uff0c\u56fe2\u5e76\u6ca1\u6709\u8bb2\u6e05\u695a\u6240\u6709\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5177\u4f53\u5b9e\u73b0\u65f6\u5019\u9700\u8981\u589e\u52a0\u5f88\u591a\u5c5e\u6027\uff0c\u51b3\u5b9a\u67d0\u4e9b\u5c5e\u6027\u7684\u7c7b\u578b\u3002 If commitIndex > lastApplied at any point during execution, you should apply a particular log entry. It is not crucial that you do it straight away (for example, in the AppendEntries RPC handler), but it is important that you ensure that this application is only done by one entity. Specifically, you will need to either have a dedicated \u201capplier\u201d, or to lock around these applies, so that some other routine doesn\u2019t also detect that entries need to be applied and also tries to apply. \u8bba\u6587\u91cc\u5e76\u6ca1\u6709\u8c08\u5230\u5982\u4f55\u53bbapply log\uff0c\u4e8b\u5b9e\u4e0a\u5728\u5b9e\u73b0\u65f6\u9700\u8981\u5728Go\u4e2d\u65b0\u5f00\u4e00\u4e2a\u7ebf\u7a0b\u6765\u63d0\u4ea4log\uff0c\u8fd9\u4e2a\u5f80\u5f80\u4f1a\u5728\u521a\u5f00\u59cb\u65f6\u9020\u6210\u56f0\u96be If a leader sends out an AppendEntries RPC, and it is rejected, but not because of log inconsistency (this can only happen if our term has passed), then you should immediately step down, and not update nextIndex . If you do, you could race with the resetting of nextIndex if you are re-elected immediately. \u8fd9\u4e5f\u662f\u6211\u540e\u671f\u53d1\u73b0\u7684\u4e00\u4e2a\u5c0f\u95ee\u9898\uff0cAE RPC\u8fd4\u56deFalse\u5e76\u4e0d\u4e00\u5b9a\u662flog\u4e0dmatch\uff0c\u8fd8\u6709\u53ef\u80fd\u662f\u8fd9\u8f6e\u5df2\u7ecf\u7ed3\u675f\u4e86\uff0c\u6240\u4ee5\u4e0d\u8981\u770b\u5230false\u5c31nextIndex -= 1\u3002 A leader is not allowed to update commitIndex to somewhere in a previous term (or, for that matter, a future term). Thus, as the rule says, you specifically need to check that log[N].term == currentTerm . This is because Raft leaders cannot be sure an entry is actually committed (and will not ever be changed in the future) if it\u2019s not from their current term. This is illustrated by Figure 8 in the paper. \u8fd9\u4e2a\u4e5f\u662f\u540e\u671f\u53d1\u73b0\u7684\u4e00\u4e2a\u5927\u95ee\u9898\uff0c\u8bba\u6587\u56fe2\u6709\u63d0\u4f46\u662f\u975e\u5e38\u5bb9\u6613\u88ab\u5ffd\u89c6\uff0c\u8bba\u6587\u5728P8-P9\u9875\u8bf4\u660e\u4e86\u8fd9\u4e2a\u7ec6\u8282\uff1a\u4e3a\u4e86\u907f\u514d\u51fa\u73b0\u56fe 8 \u90a3\u6837\u7684\u60c5\u51b5\uff0cleader\u53ea\u5141\u8bb8commit\u5f53\u524d\u8f6e\u6b21\u7684log","title":"From THE GUILD"},{"location":"6.824 Distributed Systems Engineering/#from-practice","text":"\u4f60\u7b2c\u4e00\u6b21\u5b9e\u73b0\u7684\u4ee3\u7801\uff0c\u5fc5\u7136\u662f\u9760\u60f3\u8c61\u7684\u591a\uff0c\u5927\u90e8\u5206\u662f\u6ca1\u6709\u4e25\u683c\u6309\u7167\u8bba\u6587\u6765\u7684\uff0c\u5c31\u7b97\u957f\u65f6\u95f4\u8c03\u8bd5\u4e0d\u51fa\u6765\u4e5f\u662f\u975e\u5e38\u6b63\u5e38\u7684\u3002\u5728\u540e\u7eed\u7684\u6bcf\u4e00\u6b21\u91cd\u5199/\u4fee\u6539\u540e\uff0c\u4f60\u7684\u4ee3\u7801\u4f1a\u6e10\u6e10\u7b26\u5408\u8bba\u6587\u4e2d\u63cf\u8ff0\u7684\u6837\u5b50\uff0c\u4f46\u662f\u4ecd\u7136\u4f1a\u6709\u5c0f\u7684\u95ee\u9898\u5076\u5c14\u51fa\u73b0\u3002\u6700\u7ec8\u5e94\u8be5\u662f\u548c\u8bba\u6587\u4e2d\u6bcf\u4e00\u4e2a\u5c0f\u7ec6\u8282\u90fd\u6ce8\u610f\u5230\u4e86\uff0c\u4ee3\u7801\u4e5f\u6bd4\u7b2c\u4e00\u6b21\u5b8c\u6210\u7684\u4ee3\u7801\u90fd\u4e86\u4e00\u500d\uff0c\u56e0\u4e3a\u8003\u8651\u4e86\u5f88\u591a\u5c0f\u7ec6\u8282\uff0c\u52a0\u4e86\u5f88\u591a\u8c03\u8bd5\u4ee3\u7801\uff0c\u597d\u5728 util.go \u4e2d\u7684 DPrintf \u975e\u5e38\u597d\u7528\u3002 \u53e6\u5916\uff0c\u719f\u6089 Golang \u975e\u5e38\u91cd\u8981\uff0c\u8fd9\u4efd Go tour \u975e\u5e38\u597d\u7528\uff0c\u7a0d\u5fae\u4f1a\u70b9C/C++\u8bfb\u5b8c\u57fa\u672c\u5c31\u8fbe\u5230\u53ef\u4ee5\u5b9e\u73b0Lab 2\u7684\u5730\u6b65\u4e86\uff0c\u4e0d\u8fc7\u5982\u679c\u4f60\u5df2\u7ecf\u505a\u8fc7 Lab 1- MapReduce \uff0c\u90a3\u4e48\u4f60\u5e94\u8be5\u5df2\u7ecf\u5bf9Go\u6bd4\u8f83\u719f\u6089\u4e86\u3002","title":"From Practice"},{"location":"6.824 Distributed Systems Engineering/#_3","text":"\u5199\u4e8e2019\u5e7411\u67084\u65e5","title":"\u65f6\u95f4"},{"location":"6.824 Lab3A/","text":"6.824 Lab 3A \u6458\u8981 Lab3 \u8981\u6c42\u5b8c\u6210\u57fa\u4e8eraft\u7684\u53ef\u5bb9\u9519Key-Value\u5b58\u50a8\u3002Lab3\u5206\u6210Lab3A\u548cLab3B\uff0c3A\u8981\u6c42\u5b9e\u73b0\u7b80\u5355\u7684\u5c06\u6bcf\u4e2a\u8bf7\u6c42\u7684\u5185\u5bb9\u8ffd\u52a0\u5230 log \u5217\u8868\u4e2d\uff0c\u800c\u4e0d\u7528\u8003\u8651\u4ed6\u7684\u7a7a\u95f4\u5360\u7528\u3002Lab3B\u8981\u6c42\u5b9e\u73b0Snapshot \u611f\u60f3 \u5b8c\u5168\u7406\u89e3Key-Value Storage\u548cRaft\u7684\u5173\u7cfb\u975e\u5e38\u91cd\u8981\uff0c\u5982\u679c\u4e0d\u80fd\u5b8c\u5168\u7406\u89e3\u90a3\u4e48\u5728\u5b9e\u73b0\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u9047\u5230\u5f88\u591a\u95ee\u9898\u3002Raft\u662f\u4e00\u4e2aduplicate state machine\uff0c\u901a\u8fc7\u7ef4\u62a4\u4e00\u4efd\u5171\u540c\u7684log\u6765\u9632\u6b62\u5c11\u4e8e\u534a\u6570\u7684\u670d\u52a1\u5668\u51fa\u9519\uff08\u7f51\u7edc\u3001\u5b95\u673a\uff09\u5e26\u6765\u7684\u9519\u8bef\u3002\u8fd9\u6b21\u7684Key-Value Storage\u662f\u5efa\u7acb\u5728Raft\u534f\u8bae\u4e4b\u4e0a\u7684\u4e00\u4e2a\u5b58\u50a8\u7cfb\u7edf\uff0c\u4e5f\u5c31\u662f\u5206\u5e03\u5f0f\u53ef\u5bb9\u9519\u5b58\u50a8\u3002 \u7ed3\u6784 \u901a\u8fc7\u8c03\u7528\u5728Lab2\u4e2d\u5b9e\u73b0\u7684Raft Library\uff0c\u6765\u5f97\u5230\u4e00\u81f4\u7684Log\uff0c\u53ea\u8981Log\u662f\u4e00\u81f4\u7684\uff0c\u90a3\u4e48\u6700\u7ec8\u5f97\u5230\u7684\u7ed3\u679c\u5c31\u662f\u4e00\u81f4\u7684\u3002\u4e8e\u662f\u5c31\u6709\u4e86\u601d\u8def\uff0c\u4e0d\u7ba1\u662f Put \u3001 Append \u8fd8\u662f Get \uff0c\u53ea\u8981\u5168\u90e8\u4e22\u8fdbraft log\uff0c\u7136\u540e\u518d\u6839\u636eraft log\u6765\u8fd4\u56de\u7ed3\u679c\u3002\u7ed3\u5408Lab3A\u7684\u5b9e\u9a8c\u6587\u6863\uff0c\u5927\u81f4\u53ef\u4ee5\u5f97\u51fa\u8fd9\u6837\u7684\u7ed3\u6784\u3002 graph LR A[\"Clerk\"] B[\"KVServer(raft leader)\"] C[\"KVServer(raft peer)\"] D[\"KVServer(raft peer)\"] E[\"KVServer(raft peer)\"] F[\"KVServer(raft peer)\"] A -- put/append/get --> B B -- log replication--> C B -- apply -->B C -- apply -->C D -- apply -->D E -- apply -->E F -- apply -->F B -- log replication--> D B -- log replication--> E B -- log replication--> F B -- when applied --> A \u8fd8\u8bb0\u5f97\u5728Lab2\u4e2d\uff0c\u4e3aelection timeout\u548ccommit applier\u5355\u72ec\u5f00\u4e00\u4e2a\u540e\u53f0\u7ebf\u7a0b\uff0c\u90a3\u4e48\u5728Lab3A\u4e2d\uff0c\u4e3a\u6bcf\u4e2a KVServer \u5f00\u4e00\u4e2a\u540e\u53f0\u7ebf\u7a0b\u63a5\u6536 applymsg \u901a\u9053\u4e2d\u7684\u5185\u5bb9\uff0c\u6ce8\u610f applymsg \u662f\u4e00\u4e2a\u963b\u585e\u7684\u901a\u9053\uff0c\u5fc5\u987b\u8981\u53ca\u65f6\u53d6\u51fa\uff0c\u5426\u5219raft\u65e0\u6cd5\u7ee7\u7eedcommit log\u3002 \u8fd4\u56de\u8bf7\u6c42 \u6240\u6709\u7684KVServer\u90fd\u62a4\u62e5\u6709\u4e00\u4efd\u4e00\u81f4\u7684Log\uff0c\u4f46\u662f\u53ea\u6709Leader\u624d\u4f1a\u88ab Clerk \u8bf7\u6c42\uff0c\u6240\u4ee5Leader\u4e0d\u4ec5\u4ec5\u8981Apply\u6307\u4ee4\uff0c\u8fd8\u8981\u8fd4\u56de\u5904\u7406\u7684\u7ed3\u679c\u3002\u90a3\u4e48\u65b9\u6cd5\u5c31\u662f\u4e3a\u6bcf\u4e00\u4e2a\u6307\u4ee4\u5f00\u4e00\u4e2a\u901a\u9053\uff0cKVServer\u5411Raft\u4f7f\u7528 Start() \u63d0\u4ea4\u6307\u4ee4\u4f1a\u963b\u585e\u7b49\u5f85\u901a\u9053\u8fd4\u56de\u7ed3\u679c\uff0c\u540c\u65f6Applier\u7684\u540e\u53f0\u7ebf\u7a0b\u5728\u5904\u7406\u5b8c\u6210/\u53d1\u73b0\u91cd\u590d\u540e\u5411\u8fd9\u4e2a\u901a\u9053\u53d1\u9001\u5904\u7406\u7ed3\u679c\u3002 \u8fd9\u91cc\u4f1a\u9047\u5230\u4e00\u4e2a\u95ee\u9898\uff0c\u5047\u5982Raft\u957f\u65f6\u95f4\u6ca1\u6709\u5b8c\u6210Log Replication\u6216\u8005Raft leader\u88ab\u66ff\u6362\u4e86\uff0c\u8fd9\u65f6\u8fd9\u4e2a\u901a\u9053\u5c31\u6709\u53ef\u80fd\u6c38\u8fdc\u4e0d\u4f1a\u6709\u7ed3\u679c\uff0c\u90a3\u4e48Clerk\u90a3\u8fb9\u5c31\u4f1a\u9677\u5165\u65e0\u9650\u7b49\u5f85\uff0c\u4e8e\u662f\u7ed9\u4e00\u4e2aTimeout\uff0c\u6211\u8fd9\u91cc\u8bbe\u7f6e\u4e3a2000\u6beb\u79d2\u3002\u5047\u5982\u8fd9\u4e2aTimeout\u8fc7\u77ed\uff0c\u90a3\u4e48\u53ca\u65f6Raft\u6b63\u5e38\u5b8c\u6210\u590d\u5236\uff0c\u4e5f\u53ef\u80fd\u9047\u5230Timeout\u7684\u60c5\u51b5\uff0c\u8fd9\u6837Clerk\u6700\u7ec8\u8fd8\u662fre-send\u7ed9\u8fd9\u4e2aLeader\uff0c\u8fd9\u4e2aLeader\u4f1a\u63d0\u4ea4\uff0c\u7136\u540e\u5728apply\u65f6\u53d1\u73b0\u5df2\u7ecf\u5904\u7406\u8fc7\u4e86\u3002 \u91cd\u590d\u63d0\u4ea4 \u5f53\u7f51\u7edc\u51fa\u73b0\u95ee\u9898\uff0c\u6216\u8005\u670d\u52a1\u5668\u5b95\u673a\u65f6\uff0c\u4f1a\u53d1\u751f Clerk \u591a\u6b21\u63d0\u4ea4\u540c\u4e00\u8bf7\u6c42\u7684\u60c5\u51b5\uff0c\u5904\u7406\u529e\u6cd5\u5c31\u662f\u4e3a\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u751f\u6210\u4e00\u4e2a\u552f\u4e00\u7684id\uff0c\u8fd9\u4e2aid\u7531Clerk id\u548c\u4ed6\u7684Request id\u7ec4\u6210\uff0c\u6bcf\u4e2aid\u90fd\u662f\u5355\u8c03\u589e\u52a0\u7684\uff0c\u7136\u540e\u5728apply\u65f6\u6807\u8bb0\u8fd9\u6b21\u5904\u7406\u7684command\u7684id\uff0c\u7136\u540e\u8df3\u8fc7\u5df2\u7ecf\u5904\u7406\u8fc7\u7684command\u3002 type identifier struct { Id int Index int } \u6301\u4e45\u5316 raft\u7684log\u662f\u6301\u4e45\u5316\u7684\uff0c\u5229\u7528\u8fd9\u4e2a\u7279\u70b9\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7log\u8fd8\u539f\u51fadata\u7684\u60c5\u51b5\uff0c\u5728\u91cd\u542f\u540e\u6267\u884c\u5373\u53ef\u3002 \u5b9e\u9a8c\u7ed3\u679c $ go test -run 3A Test: one client ( 3A ) ... labgob warning: Decoding into a non-default variable/field Index may not work ... Passed -- 15 .5 5 1421 142 Test: many clients ( 3A ) ... ... Passed -- 16 .9 5 1904 506 Test: unreliable net, many clients ( 3A ) ... ... Passed -- 17 .0 5 2271 376 Test: concurrent append to same key, unreliable ( 3A ) ... ... Passed -- 5 .2 3 396 52 Test: progress in majority ( 3A ) ... ... Passed -- 0 .4 5 65 2 Test: no progress in minority ( 3A ) ... ... Passed -- 1 .3 5 223 3 Test: completion after heal ( 3A ) ... ... Passed -- 1 .1 5 97 3 Test: partitions, one client ( 3A ) ... ... Passed -- 22 .8 5 2614 78 Test: partitions, many clients ( 3A ) ... ... Passed -- 23 .7 5 5189 330 Test: restarts, one client ( 3A ) ... ... Passed -- 19 .4 5 1704 142 Test: restarts, many clients ( 3A ) ... ... Passed -- 22 .9 5 3387 512 Test: unreliable net, restarts, many clients ( 3A ) ... ... Passed -- 25 .8 5 3193 368 Test: restarts, partitions, many clients ( 3A ) ... ... Passed -- 27 .7 5 4815 331 Test: unreliable net, restarts, partitions, many clients ( 3A ) ... ... Passed -- 28 .3 5 3723 180 Test: unreliable net, restarts, partitions, many clients, linearizability checks ( 3A ) ... ... Passed -- 29 .4 7 11837 161 PASS ok kvraft 258 .530s","title":"6.824 Lab3A"},{"location":"6.824 Lab3A/#6824-lab-3a","text":"","title":"6.824 Lab 3A"},{"location":"6.824 Lab3A/#_1","text":"Lab3 \u8981\u6c42\u5b8c\u6210\u57fa\u4e8eraft\u7684\u53ef\u5bb9\u9519Key-Value\u5b58\u50a8\u3002Lab3\u5206\u6210Lab3A\u548cLab3B\uff0c3A\u8981\u6c42\u5b9e\u73b0\u7b80\u5355\u7684\u5c06\u6bcf\u4e2a\u8bf7\u6c42\u7684\u5185\u5bb9\u8ffd\u52a0\u5230 log \u5217\u8868\u4e2d\uff0c\u800c\u4e0d\u7528\u8003\u8651\u4ed6\u7684\u7a7a\u95f4\u5360\u7528\u3002Lab3B\u8981\u6c42\u5b9e\u73b0Snapshot","title":"\u6458\u8981"},{"location":"6.824 Lab3A/#_2","text":"\u5b8c\u5168\u7406\u89e3Key-Value Storage\u548cRaft\u7684\u5173\u7cfb\u975e\u5e38\u91cd\u8981\uff0c\u5982\u679c\u4e0d\u80fd\u5b8c\u5168\u7406\u89e3\u90a3\u4e48\u5728\u5b9e\u73b0\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u9047\u5230\u5f88\u591a\u95ee\u9898\u3002Raft\u662f\u4e00\u4e2aduplicate state machine\uff0c\u901a\u8fc7\u7ef4\u62a4\u4e00\u4efd\u5171\u540c\u7684log\u6765\u9632\u6b62\u5c11\u4e8e\u534a\u6570\u7684\u670d\u52a1\u5668\u51fa\u9519\uff08\u7f51\u7edc\u3001\u5b95\u673a\uff09\u5e26\u6765\u7684\u9519\u8bef\u3002\u8fd9\u6b21\u7684Key-Value Storage\u662f\u5efa\u7acb\u5728Raft\u534f\u8bae\u4e4b\u4e0a\u7684\u4e00\u4e2a\u5b58\u50a8\u7cfb\u7edf\uff0c\u4e5f\u5c31\u662f\u5206\u5e03\u5f0f\u53ef\u5bb9\u9519\u5b58\u50a8\u3002","title":"\u611f\u60f3"},{"location":"6.824 Lab3A/#_3","text":"\u901a\u8fc7\u8c03\u7528\u5728Lab2\u4e2d\u5b9e\u73b0\u7684Raft Library\uff0c\u6765\u5f97\u5230\u4e00\u81f4\u7684Log\uff0c\u53ea\u8981Log\u662f\u4e00\u81f4\u7684\uff0c\u90a3\u4e48\u6700\u7ec8\u5f97\u5230\u7684\u7ed3\u679c\u5c31\u662f\u4e00\u81f4\u7684\u3002\u4e8e\u662f\u5c31\u6709\u4e86\u601d\u8def\uff0c\u4e0d\u7ba1\u662f Put \u3001 Append \u8fd8\u662f Get \uff0c\u53ea\u8981\u5168\u90e8\u4e22\u8fdbraft log\uff0c\u7136\u540e\u518d\u6839\u636eraft log\u6765\u8fd4\u56de\u7ed3\u679c\u3002\u7ed3\u5408Lab3A\u7684\u5b9e\u9a8c\u6587\u6863\uff0c\u5927\u81f4\u53ef\u4ee5\u5f97\u51fa\u8fd9\u6837\u7684\u7ed3\u6784\u3002 graph LR A[\"Clerk\"] B[\"KVServer(raft leader)\"] C[\"KVServer(raft peer)\"] D[\"KVServer(raft peer)\"] E[\"KVServer(raft peer)\"] F[\"KVServer(raft peer)\"] A -- put/append/get --> B B -- log replication--> C B -- apply -->B C -- apply -->C D -- apply -->D E -- apply -->E F -- apply -->F B -- log replication--> D B -- log replication--> E B -- log replication--> F B -- when applied --> A \u8fd8\u8bb0\u5f97\u5728Lab2\u4e2d\uff0c\u4e3aelection timeout\u548ccommit applier\u5355\u72ec\u5f00\u4e00\u4e2a\u540e\u53f0\u7ebf\u7a0b\uff0c\u90a3\u4e48\u5728Lab3A\u4e2d\uff0c\u4e3a\u6bcf\u4e2a KVServer \u5f00\u4e00\u4e2a\u540e\u53f0\u7ebf\u7a0b\u63a5\u6536 applymsg \u901a\u9053\u4e2d\u7684\u5185\u5bb9\uff0c\u6ce8\u610f applymsg \u662f\u4e00\u4e2a\u963b\u585e\u7684\u901a\u9053\uff0c\u5fc5\u987b\u8981\u53ca\u65f6\u53d6\u51fa\uff0c\u5426\u5219raft\u65e0\u6cd5\u7ee7\u7eedcommit log\u3002","title":"\u7ed3\u6784"},{"location":"6.824 Lab3A/#_4","text":"\u6240\u6709\u7684KVServer\u90fd\u62a4\u62e5\u6709\u4e00\u4efd\u4e00\u81f4\u7684Log\uff0c\u4f46\u662f\u53ea\u6709Leader\u624d\u4f1a\u88ab Clerk \u8bf7\u6c42\uff0c\u6240\u4ee5Leader\u4e0d\u4ec5\u4ec5\u8981Apply\u6307\u4ee4\uff0c\u8fd8\u8981\u8fd4\u56de\u5904\u7406\u7684\u7ed3\u679c\u3002\u90a3\u4e48\u65b9\u6cd5\u5c31\u662f\u4e3a\u6bcf\u4e00\u4e2a\u6307\u4ee4\u5f00\u4e00\u4e2a\u901a\u9053\uff0cKVServer\u5411Raft\u4f7f\u7528 Start() \u63d0\u4ea4\u6307\u4ee4\u4f1a\u963b\u585e\u7b49\u5f85\u901a\u9053\u8fd4\u56de\u7ed3\u679c\uff0c\u540c\u65f6Applier\u7684\u540e\u53f0\u7ebf\u7a0b\u5728\u5904\u7406\u5b8c\u6210/\u53d1\u73b0\u91cd\u590d\u540e\u5411\u8fd9\u4e2a\u901a\u9053\u53d1\u9001\u5904\u7406\u7ed3\u679c\u3002 \u8fd9\u91cc\u4f1a\u9047\u5230\u4e00\u4e2a\u95ee\u9898\uff0c\u5047\u5982Raft\u957f\u65f6\u95f4\u6ca1\u6709\u5b8c\u6210Log Replication\u6216\u8005Raft leader\u88ab\u66ff\u6362\u4e86\uff0c\u8fd9\u65f6\u8fd9\u4e2a\u901a\u9053\u5c31\u6709\u53ef\u80fd\u6c38\u8fdc\u4e0d\u4f1a\u6709\u7ed3\u679c\uff0c\u90a3\u4e48Clerk\u90a3\u8fb9\u5c31\u4f1a\u9677\u5165\u65e0\u9650\u7b49\u5f85\uff0c\u4e8e\u662f\u7ed9\u4e00\u4e2aTimeout\uff0c\u6211\u8fd9\u91cc\u8bbe\u7f6e\u4e3a2000\u6beb\u79d2\u3002\u5047\u5982\u8fd9\u4e2aTimeout\u8fc7\u77ed\uff0c\u90a3\u4e48\u53ca\u65f6Raft\u6b63\u5e38\u5b8c\u6210\u590d\u5236\uff0c\u4e5f\u53ef\u80fd\u9047\u5230Timeout\u7684\u60c5\u51b5\uff0c\u8fd9\u6837Clerk\u6700\u7ec8\u8fd8\u662fre-send\u7ed9\u8fd9\u4e2aLeader\uff0c\u8fd9\u4e2aLeader\u4f1a\u63d0\u4ea4\uff0c\u7136\u540e\u5728apply\u65f6\u53d1\u73b0\u5df2\u7ecf\u5904\u7406\u8fc7\u4e86\u3002","title":"\u8fd4\u56de\u8bf7\u6c42"},{"location":"6.824 Lab3A/#_5","text":"\u5f53\u7f51\u7edc\u51fa\u73b0\u95ee\u9898\uff0c\u6216\u8005\u670d\u52a1\u5668\u5b95\u673a\u65f6\uff0c\u4f1a\u53d1\u751f Clerk \u591a\u6b21\u63d0\u4ea4\u540c\u4e00\u8bf7\u6c42\u7684\u60c5\u51b5\uff0c\u5904\u7406\u529e\u6cd5\u5c31\u662f\u4e3a\u6bcf\u4e00\u4e2a\u8bf7\u6c42\u751f\u6210\u4e00\u4e2a\u552f\u4e00\u7684id\uff0c\u8fd9\u4e2aid\u7531Clerk id\u548c\u4ed6\u7684Request id\u7ec4\u6210\uff0c\u6bcf\u4e2aid\u90fd\u662f\u5355\u8c03\u589e\u52a0\u7684\uff0c\u7136\u540e\u5728apply\u65f6\u6807\u8bb0\u8fd9\u6b21\u5904\u7406\u7684command\u7684id\uff0c\u7136\u540e\u8df3\u8fc7\u5df2\u7ecf\u5904\u7406\u8fc7\u7684command\u3002 type identifier struct { Id int Index int }","title":"\u91cd\u590d\u63d0\u4ea4"},{"location":"6.824 Lab3A/#_6","text":"raft\u7684log\u662f\u6301\u4e45\u5316\u7684\uff0c\u5229\u7528\u8fd9\u4e2a\u7279\u70b9\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7log\u8fd8\u539f\u51fadata\u7684\u60c5\u51b5\uff0c\u5728\u91cd\u542f\u540e\u6267\u884c\u5373\u53ef\u3002","title":"\u6301\u4e45\u5316"},{"location":"6.824 Lab3A/#_7","text":"$ go test -run 3A Test: one client ( 3A ) ... labgob warning: Decoding into a non-default variable/field Index may not work ... Passed -- 15 .5 5 1421 142 Test: many clients ( 3A ) ... ... Passed -- 16 .9 5 1904 506 Test: unreliable net, many clients ( 3A ) ... ... Passed -- 17 .0 5 2271 376 Test: concurrent append to same key, unreliable ( 3A ) ... ... Passed -- 5 .2 3 396 52 Test: progress in majority ( 3A ) ... ... Passed -- 0 .4 5 65 2 Test: no progress in minority ( 3A ) ... ... Passed -- 1 .3 5 223 3 Test: completion after heal ( 3A ) ... ... Passed -- 1 .1 5 97 3 Test: partitions, one client ( 3A ) ... ... Passed -- 22 .8 5 2614 78 Test: partitions, many clients ( 3A ) ... ... Passed -- 23 .7 5 5189 330 Test: restarts, one client ( 3A ) ... ... Passed -- 19 .4 5 1704 142 Test: restarts, many clients ( 3A ) ... ... Passed -- 22 .9 5 3387 512 Test: unreliable net, restarts, many clients ( 3A ) ... ... Passed -- 25 .8 5 3193 368 Test: restarts, partitions, many clients ( 3A ) ... ... Passed -- 27 .7 5 4815 331 Test: unreliable net, restarts, partitions, many clients ( 3A ) ... ... Passed -- 28 .3 5 3723 180 Test: unreliable net, restarts, partitions, many clients, linearizability checks ( 3A ) ... ... Passed -- 29 .4 7 11837 161 PASS ok kvraft 258 .530s","title":"\u5b9e\u9a8c\u7ed3\u679c"},{"location":"CUDA10\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668\u642d\u5efa/","text":"\u642d\u5efa\u57fa\u4e8eCUDA 10 + RTX 2070\u7684\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668 \u914d\u7f6e\uff1a CPU\uff1aIntel i5-8500 GPU\uff1aNvidia RTX 2070 MEM\uff1a8G x 2 SSD: Intel 760p 256G \u6b65\u9aa4\uff1a \u5b89\u88c5Ubuntu 18.04 \u914d\u7f6eUbuntu \u914d\u7f6eCUDA 10\uff0cpytorch \u914d\u7f6e\u7f51\u7edc\u6620\u5c04 \u914d\u7f6ejupyter notebook\u8fdc\u7a0b\u8bbf\u95ee \u914d\u7f6e\u56fd\u5185\u6e90 sudo gedit /etc/apt/sources.list \u5f00\u5934\u52a0\u5165 deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse 3.\u5b8c\u6210 sudo apt update sudo apt upgrade \u5b89\u88c5\u663e\u5361\u9a71\u52a8 \u8fd9\u91cc\u9009\u62e9\u76f4\u63a5\u5b89\u88c5CUDA 10\uff0c\u4f1a\u81ea\u5e26\u663e\u5361\u9a71\u52a8 \u4e0b\u8f7dCUDA 10 \u7981\u7528\u81ea\u5e26\u7684 nouveau nvidia\u9a71\u52a8 \u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u901a\u8fc7\u547d\u4ee4 sudo vim /etc/modprobe.d/blacklist-nouveau.conf \u5e76\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a blacklist nouveau options nouveau modeset=0 \u518d\u66f4\u65b0\u4e00\u4e0b sudo update-initramfs -u \u4fee\u6539\u540e\u9700\u8981\u91cd\u542f\u7cfb\u7edf sudo reboot \u3002 3.\u5f00\u673a\u522b\u767b\u5f55\uff0c\u8fdb\u5165\u547d\u4ee4\u884c\u6a21\u5f0f\uff0cCTRL + ALT + F2\uff0c\u5b89\u88c5\u5373\u53ef \u5b89\u88c5pytorch \u5b89\u88c5 git sudo apt install git \u52a0\u901f git clone \u8fc7\u7a0b \u6539DNS vim /etc/hosts \u4f7f\u7528 \u7ad9\u957f\u5de5\u5177DNS\u67e5\u8be2 \u67e5\u770b\u8fd9\u4e24\u4e2a\u5730\u5740\u7684\u6700\u5feb\u7684dns,\u5e76\u4fee\u6539 52.74.223.119 github.com 151.101.109.194 github.global.ssl.fastly.net \u4f7f\u7528socks5\u52a0\u901f sudo apt install shadowsocks #\u914d\u7f6e\u6587\u4ef6ss.json sudo sslocal -c ss.json -d start \u914d\u7f6e git \u4ee3\u7406 git config --global http.proxy socks5://127.0.0.1:1080 git config --global https.proxy socks5://127.0.0.1:1080 # \u67e5\u770b\u5f53\u524d\u4ee3\u7406\u8bbe\u7f6e # git config --global http.proxy # \u5220\u9664 # git config --global --unset http.proxy # git config --global --unset https.proxy \u5b89\u88c5miniconda\u5e76\u914d\u7f6e\u4ee3\u7406 $ vim ~/.condarc \u52a0\u5165 proxy_servers: http: http://localhost:8080 https: http://localhost:8080 \u4ecesource\u5b89\u88c5 \u524d\u5f80 https://github.com/pytorch/pytorch#from-source \u6309\u6b65\u9aa4\u5b89\u88c5 \u914d\u7f6e\u8fdc\u7a0b\u8bbf\u95ee jupyter notebook pip install jupyter python >>> from notebook.auth import passwd >>> passwd() #\u590d\u5236\u5bc6\u7801 jupyter notebook --generate-config #\u52a0\u5165 c.NotebookApp.ip='*' c.NotebookApp.password = u'sha1:121321313' c.NotebookApp.open_browser = False c.NotebookApp.port = 8888 c.NotebookApp.allow_remote_access = True \u8def\u7531\u5668\u5185\u7f51\u6620\u5c04 DMZ\u6216\u8005\u7aef\u53e3\u8f6c\u53d1\u5747\u53ef \u5b89\u88c5ssh SERVER sudo apt install ssh \u5916\u7f51\u6109\u5feb\u8bbf\u95ee $ ssh xxx.xxx.xx.xxx $ python -m notebook \u5728\u81ea\u5df1\u7684\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 ip:8888 \u5373\u53ef","title":"\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668\u642d\u5efa"},{"location":"CUDA10\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668\u642d\u5efa/#cuda-10-rtx-2070","text":"\u914d\u7f6e\uff1a CPU\uff1aIntel i5-8500 GPU\uff1aNvidia RTX 2070 MEM\uff1a8G x 2 SSD: Intel 760p 256G \u6b65\u9aa4\uff1a \u5b89\u88c5Ubuntu 18.04 \u914d\u7f6eUbuntu \u914d\u7f6eCUDA 10\uff0cpytorch \u914d\u7f6e\u7f51\u7edc\u6620\u5c04 \u914d\u7f6ejupyter notebook\u8fdc\u7a0b\u8bbf\u95ee","title":"\u642d\u5efa\u57fa\u4e8eCUDA 10 + RTX 2070\u7684\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668"},{"location":"CUDA10\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668\u642d\u5efa/#_1","text":"sudo gedit /etc/apt/sources.list \u5f00\u5934\u52a0\u5165 deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse 3.\u5b8c\u6210 sudo apt update sudo apt upgrade","title":"\u914d\u7f6e\u56fd\u5185\u6e90"},{"location":"CUDA10\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668\u642d\u5efa/#_2","text":"\u8fd9\u91cc\u9009\u62e9\u76f4\u63a5\u5b89\u88c5CUDA 10\uff0c\u4f1a\u81ea\u5e26\u663e\u5361\u9a71\u52a8 \u4e0b\u8f7dCUDA 10 \u7981\u7528\u81ea\u5e26\u7684 nouveau nvidia\u9a71\u52a8 \u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u901a\u8fc7\u547d\u4ee4 sudo vim /etc/modprobe.d/blacklist-nouveau.conf \u5e76\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a blacklist nouveau options nouveau modeset=0 \u518d\u66f4\u65b0\u4e00\u4e0b sudo update-initramfs -u \u4fee\u6539\u540e\u9700\u8981\u91cd\u542f\u7cfb\u7edf sudo reboot \u3002 3.\u5f00\u673a\u522b\u767b\u5f55\uff0c\u8fdb\u5165\u547d\u4ee4\u884c\u6a21\u5f0f\uff0cCTRL + ALT + F2\uff0c\u5b89\u88c5\u5373\u53ef","title":"\u5b89\u88c5\u663e\u5361\u9a71\u52a8"},{"location":"CUDA10\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668\u642d\u5efa/#pytorch","text":"","title":"\u5b89\u88c5pytorch"},{"location":"CUDA10\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668\u642d\u5efa/#git","text":"sudo apt install git","title":"\u5b89\u88c5 git"},{"location":"CUDA10\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668\u642d\u5efa/#git-clone","text":"\u6539DNS vim /etc/hosts \u4f7f\u7528 \u7ad9\u957f\u5de5\u5177DNS\u67e5\u8be2 \u67e5\u770b\u8fd9\u4e24\u4e2a\u5730\u5740\u7684\u6700\u5feb\u7684dns,\u5e76\u4fee\u6539 52.74.223.119 github.com 151.101.109.194 github.global.ssl.fastly.net \u4f7f\u7528socks5\u52a0\u901f sudo apt install shadowsocks #\u914d\u7f6e\u6587\u4ef6ss.json sudo sslocal -c ss.json -d start \u914d\u7f6e git \u4ee3\u7406 git config --global http.proxy socks5://127.0.0.1:1080 git config --global https.proxy socks5://127.0.0.1:1080 # \u67e5\u770b\u5f53\u524d\u4ee3\u7406\u8bbe\u7f6e # git config --global http.proxy # \u5220\u9664 # git config --global --unset http.proxy # git config --global --unset https.proxy","title":"\u52a0\u901f git clone \u8fc7\u7a0b"},{"location":"CUDA10\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668\u642d\u5efa/#miniconda","text":"$ vim ~/.condarc \u52a0\u5165 proxy_servers: http: http://localhost:8080 https: http://localhost:8080","title":"\u5b89\u88c5miniconda\u5e76\u914d\u7f6e\u4ee3\u7406"},{"location":"CUDA10\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668\u642d\u5efa/#source","text":"\u524d\u5f80 https://github.com/pytorch/pytorch#from-source \u6309\u6b65\u9aa4\u5b89\u88c5","title":"\u4ecesource\u5b89\u88c5"},{"location":"CUDA10\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668\u642d\u5efa/#_3","text":"","title":"\u914d\u7f6e\u8fdc\u7a0b\u8bbf\u95ee"},{"location":"CUDA10\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668\u642d\u5efa/#jupyter-notebook","text":"pip install jupyter python >>> from notebook.auth import passwd >>> passwd() #\u590d\u5236\u5bc6\u7801 jupyter notebook --generate-config #\u52a0\u5165 c.NotebookApp.ip='*' c.NotebookApp.password = u'sha1:121321313' c.NotebookApp.open_browser = False c.NotebookApp.port = 8888 c.NotebookApp.allow_remote_access = True","title":"jupyter notebook"},{"location":"CUDA10\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668\u642d\u5efa/#_4","text":"DMZ\u6216\u8005\u7aef\u53e3\u8f6c\u53d1\u5747\u53ef","title":"\u8def\u7531\u5668\u5185\u7f51\u6620\u5c04"},{"location":"CUDA10\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668\u642d\u5efa/#ssh-server","text":"sudo apt install ssh","title":"\u5b89\u88c5ssh SERVER"},{"location":"CUDA10\u6df1\u5ea6\u5b66\u4e60\u670d\u52a1\u5668\u642d\u5efa/#_5","text":"$ ssh xxx.xxx.xx.xxx $ python -m notebook \u5728\u81ea\u5df1\u7684\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 ip:8888 \u5373\u53ef","title":"\u5916\u7f51\u6109\u5feb\u8bbf\u95ee"},{"location":"MACOS\u4e0b\u5b89\u88c5Pylucene\u5b89\u88c5\u8fc7\u7a0b && \u8e29\u5751\u8bb0\u5f55/","text":"MACOS\u4e0b\u5b89\u88c5Pylucene\u5b89\u88c5\u8fc7\u7a0b && \u8e29\u5751\u8bb0\u5f55 \u5b89\u88c5JDK \u6b64\u5904\u6ce8\u610f\u4e0bJDK8\uff0c\u5982\u679c\u4e0b\u6700\u65b0\u7248JDK12\u540e\u7eed\u4f1a\u51fa\u9519 \u5b89\u88c5JCC \u5728 http://lucene.apache.org/pylucene/ \u4e0b\u8f7d\u5b89\u88c5\u5305 # https://mirrors.tuna.tsinghua.edu.cn/apache/lucene/pylucene/pylucene-7.6.0-src.tar.gz cd pylucene-7.6.0 cd jcc python3 setup.py install #\u5982\u679cJDK\u88c5\u7684\u4e0d\u5bf9\u6b64\u5904\u4f1a\u62a5\u9519 #python #\u5b89\u88c5\u597d\u4e4b\u540e\uff0c\u6d4b\u8bd5 import jcc \u5b89\u88c5pylucene \u5b89\u88c5ANT\uff08\u4f9d\u8d56\uff09 brew install ant \u6539Makefile #\u589e\u52a0 ANT = /usr/local/bin/ant PYTHON = python3 JCC = $( PYTHON ) -m jcc.__main__ --shared NUM_FILES = 2 \u7f16\u8bd1 make #\u6b64\u5904\u5982\u679c\u5f00\u591a\u7ebf\u7a0b\u4e0b\u4e00\u6b65\u4f1a\u62a5\u9519 make -j4\u4e0d\u884c sudo make install #python #\u5b89\u88c5\u597d\u4e4b\u540e\uff0c\u6d4b\u8bd5 import lucene","title":"MAC\u4e0b\u5b89\u88c5Pylucenes\u8e29\u5751\u8bb0\u5f55"},{"location":"MACOS\u4e0b\u5b89\u88c5Pylucene\u5b89\u88c5\u8fc7\u7a0b && \u8e29\u5751\u8bb0\u5f55/#macospylucene","text":"","title":"MACOS\u4e0b\u5b89\u88c5Pylucene\u5b89\u88c5\u8fc7\u7a0b &amp;&amp; \u8e29\u5751\u8bb0\u5f55"},{"location":"MACOS\u4e0b\u5b89\u88c5Pylucene\u5b89\u88c5\u8fc7\u7a0b && \u8e29\u5751\u8bb0\u5f55/#jdk","text":"\u6b64\u5904\u6ce8\u610f\u4e0bJDK8\uff0c\u5982\u679c\u4e0b\u6700\u65b0\u7248JDK12\u540e\u7eed\u4f1a\u51fa\u9519","title":"\u5b89\u88c5JDK"},{"location":"MACOS\u4e0b\u5b89\u88c5Pylucene\u5b89\u88c5\u8fc7\u7a0b && \u8e29\u5751\u8bb0\u5f55/#jcc","text":"\u5728 http://lucene.apache.org/pylucene/ \u4e0b\u8f7d\u5b89\u88c5\u5305 # https://mirrors.tuna.tsinghua.edu.cn/apache/lucene/pylucene/pylucene-7.6.0-src.tar.gz cd pylucene-7.6.0 cd jcc python3 setup.py install #\u5982\u679cJDK\u88c5\u7684\u4e0d\u5bf9\u6b64\u5904\u4f1a\u62a5\u9519 #python #\u5b89\u88c5\u597d\u4e4b\u540e\uff0c\u6d4b\u8bd5 import jcc","title":"\u5b89\u88c5JCC"},{"location":"MACOS\u4e0b\u5b89\u88c5Pylucene\u5b89\u88c5\u8fc7\u7a0b && \u8e29\u5751\u8bb0\u5f55/#pylucene","text":"","title":"\u5b89\u88c5pylucene"},{"location":"MACOS\u4e0b\u5b89\u88c5Pylucene\u5b89\u88c5\u8fc7\u7a0b && \u8e29\u5751\u8bb0\u5f55/#ant","text":"brew install ant","title":"\u5b89\u88c5ANT\uff08\u4f9d\u8d56\uff09"},{"location":"MACOS\u4e0b\u5b89\u88c5Pylucene\u5b89\u88c5\u8fc7\u7a0b && \u8e29\u5751\u8bb0\u5f55/#makefile","text":"#\u589e\u52a0 ANT = /usr/local/bin/ant PYTHON = python3 JCC = $( PYTHON ) -m jcc.__main__ --shared NUM_FILES = 2","title":"\u6539Makefile"},{"location":"MACOS\u4e0b\u5b89\u88c5Pylucene\u5b89\u88c5\u8fc7\u7a0b && \u8e29\u5751\u8bb0\u5f55/#_1","text":"make #\u6b64\u5904\u5982\u679c\u5f00\u591a\u7ebf\u7a0b\u4e0b\u4e00\u6b65\u4f1a\u62a5\u9519 make -j4\u4e0d\u884c sudo make install #python #\u5b89\u88c5\u597d\u4e4b\u540e\uff0c\u6d4b\u8bd5 import lucene","title":"\u7f16\u8bd1"},{"location":"flask\u90e8\u7f72\u7684\u4e8c\u4e09\u4e8b/","text":"Flask\u90e8\u7f72\u7684\u4e8c\u4e09\u4e8b \u5f53\u4f7f\u7528Flask\u4f5c\u4e3a\u5f00\u53d1\u8bed\u8a00\u7684\u540e\u7aef\u8981\u4e0a\u7ebf\u4e4b\u65f6\uff0c\u5c31\u4f1a\u9047\u5230\u90e8\u7f72\u7684\u95ee\u9898\u3002\u4f17\u6240\u5468\u77e5\uff0cflask\u81ea\u5e26\u7684\u5f00\u53d1\u670d\u52a1\u5668\u662f\u4e0d\u80fd\u7528\u5728\u751f\u4ea7\u73af\u5883\u7684\uff0c\u6b63\u5982\u5b98\u7f51\u8fd9\u4e48\u8bf4\uff1a While lightweight and easy to use, Flask\u2019s built-in server is not suitable for production as it doesn\u2019t scale well. Some of the options available for properly running Flask in production are documented here. \u5e38\u7528\u7684\u90e8\u7f72\u65b9\u6848\u4e3a\u4f7f\u7528 uWSGI \u4f7f\u7528WSGI\u670d\u52a1\u5668 uwsgi --http 127 .0.0.1:5000 --module myproject:app \u5b98\u7f51\u8fd9\u4e48\u8bf4\uff1a For a more optimized setup, see configuring uWSGI and NGINX. WSGI \u4f5c\u4e3aweb\u670d\u52a1\u5668\uff0c NGINX \u4f5c\u4e3a\u4ee3\u7406\u670d\u52a1\u5668 \u914d\u7f6eWSGI\u670d\u52a1\u5668 \u5e38\u89c1\u7684\u914d\u7f6e\u65b9\u6848\uff1a\u521b\u5efa config.ini [uwsgi] # uwsgi \u542f\u52a8\u65f6\u6240\u4f7f\u7528\u7684\u5730\u5740\u4e0e\u7aef\u53e3 http-socket = 127.0.0.1:9001 # Flask\u76ee\u5f55 chdir = /home/xxxx/flask-app # Flask \u542f\u52a8\u6587\u4ef6 wsgi-file = main.py # Flask\u5b9e\u4f8b\u540d\u5b57 callable = app # \u5904\u7406\u5668\u6570 processes = 4 # \u7ebf\u7a0b\u6570 threads = 2 #\u72b6\u6001\u68c0\u548cpid stats = %(chdir)/uwsgi.status pidfile = %(chdir)/uwsgi.pid \u542f\u52a8wsgi\u670d\u52a1\u5668 uwsgi --ini config.ini uwsgi -d --ini config.ini #\u5b88\u62a4\u8fdb\u7a0b uwsgi --reload uwsgi.pid #gracefully reload \u914d\u7f6eNGINX\u4ee3\u7406\u670d\u52a1\u5668 http{ server { listen 5001 ; #\u5916\u90e8\u53ef\u8bbf\u95ee\u7aef\u53e3 server_name xxxxx ; #\u516c\u7f51\u5730\u5740 location / { include uwsgi_params ; proxy_pass http://127.0.0.1:9001 ; #wsgi\u7aef\u53e3 uwsgi_param UWSGI_PYHOME xxxx/venv ; #flask \u865a\u62df\u73af\u5883\u76ee\u5f55 uwsgi_param UWSGI_CHDIR xxxx ; # flask\u76ee\u5f55 uwsgi_param UWSGI_SCRIPT main:app ; # \u6307\u5b9a\u542f\u52a8\u7a0b\u5e8f } } } NGINX\u540c\u65f6\u914d\u7f6ehttp\u548chttps server { listen 80 ; listen 443 ssl ; server_name xxx ; ssl_certificate xxx.crt ; ssl_certificate_key xxx.key ; location / { include uwsgi_params ; proxy_pass http://127.0.0.1:xxxx ; #wsgi\u7aef\u53e3 } } \u7136\u540e\u91cd\u65b0\u52a0\u8f7dnginx nginx -s reload","title":"Flask\u90e8\u7f72"},{"location":"flask\u90e8\u7f72\u7684\u4e8c\u4e09\u4e8b/#flask","text":"\u5f53\u4f7f\u7528Flask\u4f5c\u4e3a\u5f00\u53d1\u8bed\u8a00\u7684\u540e\u7aef\u8981\u4e0a\u7ebf\u4e4b\u65f6\uff0c\u5c31\u4f1a\u9047\u5230\u90e8\u7f72\u7684\u95ee\u9898\u3002\u4f17\u6240\u5468\u77e5\uff0cflask\u81ea\u5e26\u7684\u5f00\u53d1\u670d\u52a1\u5668\u662f\u4e0d\u80fd\u7528\u5728\u751f\u4ea7\u73af\u5883\u7684\uff0c\u6b63\u5982\u5b98\u7f51\u8fd9\u4e48\u8bf4\uff1a While lightweight and easy to use, Flask\u2019s built-in server is not suitable for production as it doesn\u2019t scale well. Some of the options available for properly running Flask in production are documented here. \u5e38\u7528\u7684\u90e8\u7f72\u65b9\u6848\u4e3a\u4f7f\u7528 uWSGI","title":"Flask\u90e8\u7f72\u7684\u4e8c\u4e09\u4e8b"},{"location":"flask\u90e8\u7f72\u7684\u4e8c\u4e09\u4e8b/#wsgi","text":"uwsgi --http 127 .0.0.1:5000 --module myproject:app \u5b98\u7f51\u8fd9\u4e48\u8bf4\uff1a For a more optimized setup, see configuring uWSGI and NGINX. WSGI \u4f5c\u4e3aweb\u670d\u52a1\u5668\uff0c NGINX \u4f5c\u4e3a\u4ee3\u7406\u670d\u52a1\u5668","title":"\u4f7f\u7528WSGI\u670d\u52a1\u5668"},{"location":"flask\u90e8\u7f72\u7684\u4e8c\u4e09\u4e8b/#wsgi_1","text":"\u5e38\u89c1\u7684\u914d\u7f6e\u65b9\u6848\uff1a\u521b\u5efa config.ini [uwsgi] # uwsgi \u542f\u52a8\u65f6\u6240\u4f7f\u7528\u7684\u5730\u5740\u4e0e\u7aef\u53e3 http-socket = 127.0.0.1:9001 # Flask\u76ee\u5f55 chdir = /home/xxxx/flask-app # Flask \u542f\u52a8\u6587\u4ef6 wsgi-file = main.py # Flask\u5b9e\u4f8b\u540d\u5b57 callable = app # \u5904\u7406\u5668\u6570 processes = 4 # \u7ebf\u7a0b\u6570 threads = 2 #\u72b6\u6001\u68c0\u548cpid stats = %(chdir)/uwsgi.status pidfile = %(chdir)/uwsgi.pid \u542f\u52a8wsgi\u670d\u52a1\u5668 uwsgi --ini config.ini uwsgi -d --ini config.ini #\u5b88\u62a4\u8fdb\u7a0b uwsgi --reload uwsgi.pid #gracefully reload","title":"\u914d\u7f6eWSGI\u670d\u52a1\u5668"},{"location":"flask\u90e8\u7f72\u7684\u4e8c\u4e09\u4e8b/#nginx","text":"http{ server { listen 5001 ; #\u5916\u90e8\u53ef\u8bbf\u95ee\u7aef\u53e3 server_name xxxxx ; #\u516c\u7f51\u5730\u5740 location / { include uwsgi_params ; proxy_pass http://127.0.0.1:9001 ; #wsgi\u7aef\u53e3 uwsgi_param UWSGI_PYHOME xxxx/venv ; #flask \u865a\u62df\u73af\u5883\u76ee\u5f55 uwsgi_param UWSGI_CHDIR xxxx ; # flask\u76ee\u5f55 uwsgi_param UWSGI_SCRIPT main:app ; # \u6307\u5b9a\u542f\u52a8\u7a0b\u5e8f } } }","title":"\u914d\u7f6eNGINX\u4ee3\u7406\u670d\u52a1\u5668"},{"location":"flask\u90e8\u7f72\u7684\u4e8c\u4e09\u4e8b/#nginxhttphttps","text":"server { listen 80 ; listen 443 ssl ; server_name xxx ; ssl_certificate xxx.crt ; ssl_certificate_key xxx.key ; location / { include uwsgi_params ; proxy_pass http://127.0.0.1:xxxx ; #wsgi\u7aef\u53e3 } } \u7136\u540e\u91cd\u65b0\u52a0\u8f7dnginx nginx -s reload","title":"NGINX\u540c\u65f6\u914d\u7f6ehttp\u548chttps"},{"location":"\u4f53\u7cfb\u7ed3\u6784\u590d\u4e60/","text":"\u4f53\u7cfb\u7ed3\u6784\u590d\u4e60 \u7b2c\u4e00\u7ae0 Amdahl \u5b9a\u7406 Amdahl\u5b9a\u7406\u63cf\u8ff0\u4e86\u6539\u8fdb**\u53ef\u5e76\u884c**\u90e8\u5206\u540e\u8ba1\u7b97\u673a\u7cfb\u7edf**\u6574\u4f53**\u7684\u52a0\u901f\u6bd4\u4f8b \u200b \u4e66\u4e0a\u7684\u5b9a\u7406 \\begin{align} Fe &= \\frac{T_{\u53ef\u5e76\u884c}}{T_{\u603b}}\\\\ Se &= \\frac{T_{\u53ef\u5e76\u884c}}{T'_{\u53ef\u5e76\u884c}}\uff08T'_{\u53ef\u5e76\u884c}\u8868\u793a\u6539\u8fdb\u540eT_{\u53ef\u5e76\u884c}\u9700\u8981\u7684\u65f6\u95f4)\\\\ &\u90a3\u4e48:\\\\ T'_{\u603b} &= T_{\u603b}((1-Fe) + \\frac{Fe}{Se}) ,(\u53bb\u9664\u4e0d\u53ef\u5e76\u884c\u7684\u90e8\u5206\uff0c\u7136\u540e\u4e58\u4e0a\u53ef\u5e76\u884c\u90e8\u5206\u7684\u52a0\u901f\u6bd4\u4f8b)\\\\ &\u56e0\u6b64\u6539\u8fdb\u540e\u6574\u4e2a\u4efb\u52a1\u7684\u52a0\u901f\u6bd4\u4e3a:\\\\ Sn &= \\frac{T_{\u603b}}{T'_{\u603b}} = \\frac{1}{(1-Fe) + \\frac{Fe}{Se}} \\end{align} \\begin{align} Fe &= \\frac{T_{\u53ef\u5e76\u884c}}{T_{\u603b}}\\\\ Se &= \\frac{T_{\u53ef\u5e76\u884c}}{T'_{\u53ef\u5e76\u884c}}\uff08T'_{\u53ef\u5e76\u884c}\u8868\u793a\u6539\u8fdb\u540eT_{\u53ef\u5e76\u884c}\u9700\u8981\u7684\u65f6\u95f4)\\\\ &\u90a3\u4e48:\\\\ T'_{\u603b} &= T_{\u603b}((1-Fe) + \\frac{Fe}{Se}) ,(\u53bb\u9664\u4e0d\u53ef\u5e76\u884c\u7684\u90e8\u5206\uff0c\u7136\u540e\u4e58\u4e0a\u53ef\u5e76\u884c\u90e8\u5206\u7684\u52a0\u901f\u6bd4\u4f8b)\\\\ &\u56e0\u6b64\u6539\u8fdb\u540e\u6574\u4e2a\u4efb\u52a1\u7684\u52a0\u901f\u6bd4\u4e3a:\\\\ Sn &= \\frac{T_{\u603b}}{T'_{\u603b}} = \\frac{1}{(1-Fe) + \\frac{Fe}{Se}} \\end{align} \u6982\u5ff5:\u4e3a\u4ec0\u4e48\u53d1\u5c55\u8ba1\u7b97\u673a\u7cfb\u7edf\u7ed3\u6784 \u4f53\u7cfb\u7ed3\u6784\uff1a\u7814\u7a76**\u8f6f\u786c\u4ef6\u529f\u80fd\u5206\u914d**\u548c**\u8f6f\u786c\u4ef6\u754c\u9762** \u7ec4\u6210\u539f\u7406\uff1a\u903b\u8f91\u5b9e\u73b0 \u5b9e\u73b0\uff1a\u7269\u7406\u5b9e\u73b0 \ud83c\udf30\uff1a \u786e\u5b9a\u662f\u5426\u9700\u8981\u4e58\u9664\u6307\u4ee4 -- \u7cfb\u7edf\u7ed3\u6784 \u4e58\u9664\u6307\u4ee4\u7528\u4e58\u6cd5\u5668\u8fd8\u662f\u52a0\u6cd5\u5668\u5b9e\u73b0 -- \u7ec4\u6210\u539f\u7406 \u4e58\u6cd5\u5668\u6216\u52a0\u6cd5\u5668\u7684\u7269\u7406\u5b9e\u73b0 -- \u5b9e\u73b0 \u6a21\u62df\u548c\u4eff\u771f \u6a21\u62df\uff1a\u8f6f\u4ef6\u5b9e\u73b0\uff08\u5bbf\u4e3b\u673a\uff0c\u865a\u62df\u673a\uff09\uff0c\u7075\u6d3b\u4f46\u662f\u901f\u5ea6\u6162 \u4eff\u771f\uff1a\u786c\u4ef6\u5b9e\u73b0\uff08\u5bbf\u4e3b\u673a\uff0c\u76ee\u6807\u673a\uff09\uff0c\u901f\u5ea6\u5feb\u4f46\u662f\u4e0d\u7075\u6d3b CPU\u6027\u80fd\u516c\u5f0f \\mathbf{CPI} = \\frac{\\mathbf{CPU}\u65f6\u949f\u5468\u671f\u603b\u6570}{\u6307\u4ee4\u6761\u6570} \\\\ T_\\mathbf{CPU} = T_{0} \\times \\sum_{i=1}^n(\\mathbf{CPI}_{i}\\times \\mathbf{I}_{i})\\\\ \\mathbf{CPI} = \\frac{\\mathbf{CPU}\u65f6\u949f\u5468\u671f\u603b\u6570}{\u6307\u4ee4\u6761\u6570} \\\\ T_\\mathbf{CPU} = T_{0} \\times \\sum_{i=1}^n(\\mathbf{CPI}_{i}\\times \\mathbf{I}_{i})\\\\ \u4e00\u4e9b\u8868\u793a\u8861\u91cf\u6307\u4ee4\u6267\u884c\u901f\u5ea6\u7684\u5355\u4f4d MIPS(Million instructions per second)\uff0cGIPS\uff0cTIPS\u3002IPC\u4e3aInstructions per cycle $$ \\begin{align} \\mathbf{MIPS} &= \\frac{\u6307\u4ee4\u6761\u6570}{\u6307\u4ee4\u6267\u884c\u65f6\u95f4\\times10^6}=\\mathbf{f}\\times\\mathbf{IPC} \\ \\mathbf{GIPS} &= \\frac{\u6307\u4ee4\u6761\u6570}{\u6307\u4ee4\u6267\u884c\u65f6\u95f4\\times10^9}=\\mathbf{f}\\times\\mathbf{IPC} \\ \\mathbf{TIPS} &= \\frac{\u6307\u4ee4\u6761\u6570}{\u6307\u4ee4\u6267\u884c\u65f6\u95f4\\times10^{12}}=\\mathbf{f}\\times\\mathbf{IPC}\\ \\end{align} $$ \u8bbe\u8ba1\u65b9\u6cd5 \u81ea\u4e0a\u800c\u4e0b\uff1a\u4e13\u7528\u8ba1\u7b97\u673a \u81ea\u4e0b\u800c\u4e0a\uff1a\u901a\u7528\uff0c\u6548\u7387\u4f4e \u4e2d\u95f4\u5f00\u59cb\uff1a\u5408\u7406 \u4f5b\u6797\u5206\u7c7b\u6cd5 \u6309\u7167**\u6307\u4ee4\u6d41\u548c\u6570\u636e\u6d41\u7684\u591a\u500d\u578b\u7279\u5f81**\u8fdb\u884c\u5206\u7c7b \u6307\u4ee4\u6d41\uff1a\u673a\u5668\u6267\u884c\u7684\u6307\u4ee4\u5e8f\u5217 \u6570\u636e\u6d41\uff1a\u7531\u6307\u4ee4\u6d41\u8c03\u7528\u7684\u6570\u636e\u5e8f\u5217 \u591a\u500d\u6027\uff1a\u6700\u5927\u53ef\u80fd\u6570 S\uff1asingle|M\uff1amultiple|I\uff1aInstruction|D\uff1aDatasteam \u4e8e\u662f\u5206\u6210\uff1a SISD\uff1a\u6807\u91cf\u6d41\u6c34\u5904\u7406\u673a SIMD\uff1a\u5e76\u884c\u3001\u5411\u91cf\u3001\u8d85\u6d41\u6c34\u7ebf MIMD\uff1a\u51e0\u4e4e\u4e0d\u5b58\u5728 MIMD\uff1a\u4e0d\u5b58\u5728 \u7f3a\u70b9\uff1a \u5206\u7c7b\u7c97\uff08SIMD\u4e2d\u5305\u542b\u591a\u79cd\uff09 \u6570\u636e\u6d41\u53d7\u6307\u4ee4\u6d41\u63a7\u5236\uff08MISD\u4e0d\u53ef\u80fd\u5b58\u5728\uff09 \u51af\u6c0f\u5206\u7c7b \u7528\u6700\u5927\u5e76\u884c\u5ea6\u6765\u5206\u7c7b\uff0c\u5047\u8bbe\u540c\u65f6\u5904\u7406\u7684\u5b57\u6570 m m \uff0c\u5b57\u7684\u4e8c\u8fdb\u5236\u4f4d\u6570 n n \uff0c\u7528 (m,n) (m,n) \u8868\u793a \u7f3a\u70b9\u662f\u53ea\u8003\u8651\u6570\u636e\u5e76\u884c \u6c49\u5fb7\u52d2\u5206\u7c7b \u591a\u5c42\u6b21\u5206\u7c7b \u8865\u5145\uff1a\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u5c42\u6b21\u7ed3\u6784 \u51710-6\u5c42\u3002 0-1\u5c42CPU\u529f\u80fd\uff1a\u786c\u8054\u903b\u8f91\uff0c\u5fae\u7a0b\u5e8f 2\u5c42\u8f6f\u786c\u4ef6\u5206\u754c\uff1a\u673a\u5668\u8bed\u97f3 3-5\u5c42\u7cfb\u7edf\u8f6f\u4ef6\uff1a\u64cd\u4f5c\u7cfb\u7edf\uff0c\u6c47\u7f16\u8bed\u8a00\uff0c\u9ad8\u7ea7\u8bed\u8a00 6\u5c42\u5e94\u7528\u8f6f\u4ef6\uff1a\u5e94\u7528\u7a0b\u5e8f \u8865\u5145\uff1a\u7cfb\u5217\u673a \u5177\u6709\u76f8\u540c\u7684\u7cfb\u7edf\u7ed3\u6784\uff0c\u4f46\u662f\u7ec4\u6210\u548c\u5b9e\u73b0\u6280\u672f\u4e0d\u540c\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\u3010\u6027\u80fd\uff0c\u4ef7\u683c\u3011 \u8865\u5145\uff1a\u865a\u62df\u673a \u7531\u8f6f\u4ef6\u5b9e\u73b0\u7684\u673a\u5668 \u7b2c\u4e8c\u7ae0 \u6570\u636e\u7c7b\u578b \u6570\u636e\u8868\u793a\uff1a\u8ba1\u7b97\u673a\u786c\u4ef6\u80fd\u591f\u76f4\u63a5\u8bc6\u522b\uff0c\u88ab\u6307\u4ee4\u7cfb\u7edf\u76f4\u63a5\u8c03\u7528\u7684\u6570\u636e\u7c7b\u578b \u6570\u636e\u7ed3\u6784\uff1a\u8f6f\u4ef6\u5b9e\u73b0\u7684\u6570\u636e\u8868\u793a\uff0c\u7b97\u6cd5 \ud83c\udf30\uff1a C = A + B \uff081\uff09\u65e0\u5411\u91cf\u6570\u636e\u8868\u793a\uff1a\u9700\u89814\u6761\u6307\u4ee4 \uff082\uff09\u6709\u5411\u91cf\u6570\u636e\u8868\u793a\uff1a\u9700\u89811\u6761\u6307\u4ee4 \u6307\u4ee4\u7ec4\u6210 \u64cd\u4f5c\u7801\uff1a\u64cd\u4f5c\u79cd\u7c7b\uff0c\u64cd\u4f5c\u6570\u63cf\u8ff0 \u5730\u5740\u7801\uff1a\u5730\u5740\uff0c\u5730\u5740\u9644\u52a0\u4fe1\u606f\uff0c\u5bfb\u5740\u65b9\u5f0f \u64cd\u4f5c\u7801\u4e09\u79cd\u7f16\u7801\u65b9\u5f0f\uff1a \u56fa\u5b9a\u957f\u5ea6 Huffman\uff1a\uff08\u624b\u5de5\uff1a\u81ea\u4e0a\u800c\u4e0b\u7f16\u7801\uff09 \u6269\u5c55\u7f16\u7801\uff1a\u7531\u56fa\u5b9a\u957f\u64cd\u4f5c\u7801\u4e0eHuffman\u7f16\u7801\u7ed3\u5408 \u5730\u5740\u7801\u7684\u4f18\u5316\u8bbe\u8ba1 \u5b58\u50a8\u5bb9\u91cf \u6267\u884c\u901f\u5ea6 \u6307\u4ee4\u7cfb\u7edf\u7684\u4e8c\u516b\u5b9a\u5f8b \u7b80\u5355\u6307\u4ee4\u536020%\uff0c\u51fa\u73b0\u9891\u738780% \u590d\u6742\u6307\u4ee4\u536080%\uff0c\u51fa\u73b0\u9891\u738720% \u8865\u5145\uff1aRISC\u7684\u5b9a\u4e49\u3001\u7279\u70b9\u548c\u7ec6\u60f3\u7cbe\u534e \u5b9a\u4e49\uff1a\u7cbe\u7b80\u6307\u4ee4\u7cfb\u7edf\u2014\u2014\u53ea\u4fdd\u7559\u529f\u80fd\u7b80\u5355\uff0c\u80fd\u5728\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u5185\u5b8c\u6210\u7684\u6307\u4ee4\uff0c\u5176\u4ed6\u590d\u6742\u529f\u80fd\u7528\u4e00\u6bb5\u5b50\u7a0b\u5e8f\u5b9e\u73b0 \u7279\u70b9\uff1a\u5355\u5468\u671f\u3001\u56fa\u5b9a\u6307\u4ee4\u683c\u5f0f\u3001\u7f16\u8bd1\u4f18\u5316\u3001\u51cf\u5c11\u6307\u4ee4\u548c\u5bfb\u5740\u65b9\u5f0f\u79cd\u7c7b|LOAD/STORE\uff0c\u786c\u5e03\u7ebf\u63a7\u5236\u903b\u8f91 \u601d\u60f3\u7cbe\u534e\uff1a\u51cf\u5c11 \\mathbf{CPI} \\mathbf{CPI} \u5b58\u50a8\u7cfb\u7edf \u5b9a\u4e49 \\begin{align} \\mathbf{price}(\u4fbf\u5b9c + \u8d35) &\\simeq \\mathbf{price}(\u4fbf\u5b9c) \\\\ \\mathbf{speed}(\u4fbf\u5b9c + \u8d35) &\\simeq \\mathbf{speed}(\u8d35) \\\\ \\mathbf{capacity}(\u4fbf\u5b9c + \u8d35) &\\simeq \\mathbf{capacity}(\u4fbf\u5b9c) \\\\ \\end{align} \\begin{align} \\mathbf{price}(\u4fbf\u5b9c + \u8d35) &\\simeq \\mathbf{price}(\u4fbf\u5b9c) \\\\ \\mathbf{speed}(\u4fbf\u5b9c + \u8d35) &\\simeq \\mathbf{speed}(\u8d35) \\\\ \\mathbf{capacity}(\u4fbf\u5b9c + \u8d35) &\\simeq \\mathbf{capacity}(\u4fbf\u5b9c) \\\\ \\end{align} \u8bbf\u95ee\u6548\u7387 \\mathbf{e} = \\frac{T_{1}}{T} = \\frac{T_{1}}{H \\times T_{!} + (1-H)\\times T_{2}} \\mathbf{e} = \\frac{T_{1}}{T} = \\frac{T_{1}}{H \\times T_{!} + (1-H)\\times T_{2}} \u9884\u53d6\u6280\u672f\u63d0\u9ad8\u8bbf\u95ee\u7387 \\mathbf{e'} = \\frac{\\mathbf{e} -1 + \\mathbf{n}}{\\mathbf{n}},\\mathbf{n} = \u5757\u5927\u5c0f\\times \u91cd\u590d\u5229\u7528\u7387 \\mathbf{e'} = \\frac{\\mathbf{e} -1 + \\mathbf{n}}{\\mathbf{n}},\\mathbf{n} = \u5757\u5927\u5c0f\\times \u91cd\u590d\u5229\u7528\u7387 \u865a\u62df\u5b58\u50a8\u5668\u52a0\u5feb\u5185\u90e8\u5730\u5740\u53d8\u6362\u7684\u65b9\u6cd5 \u9875\u8868\u7ea7\u6570 g = \\left \\lfloor \\frac{\\log_{2}N_{v}-\\log_{2}N_{p}} {\\log_{2}N_{p}-\\log_{2}N_{d}} \\right \\rfloor\\\\ N_{v}\u4e3a\u865a\u62df\u5b58\u50a8\u7a7a\u95f4\u5927\u5c0f\uff0cN_{p}\u4e3a\u9875\u9762\u5927\u5c0f\uff0cN_{d}\u4e3a\u4e00\u4e2a\u9875\u8868\u5b58\u50a8\u5b57\u5927\u5c0f g = \\left \\lfloor \\frac{\\log_{2}N_{v}-\\log_{2}N_{p}} {\\log_{2}N_{p}-\\log_{2}N_{d}} \\right \\rfloor\\\\ N_{v}\u4e3a\u865a\u62df\u5b58\u50a8\u7a7a\u95f4\u5927\u5c0f\uff0cN_{p}\u4e3a\u9875\u9762\u5927\u5c0f\uff0cN_{d}\u4e3a\u4e00\u4e2a\u9875\u8868\u5b58\u50a8\u5b57\u5927\u5c0f \u65b9\u6cd5\uff1a \u76ee\u5f55\u8868 \u5feb\u6162\u8868 \u6563\u5217\u51fd\u6570 \u5806\u6808\u578b\u7b97\u6cd5 \u968f\u7740\u5206\u914d\u7ed9\u7a0b\u5e8f\u7684\u4e3b\u5b58\u9875\u9762\u589e\u52a0\uff0c\u4e3b\u5b58\u7684\u547d\u4e2d\u7387\u4e5f\u63d0\u9ad8\uff0c\u81f3\u5c11\u4e0d\u4e0b\u964d Cache\u5b58\u50a8\u7cfb\u7edf\u5730\u5740\u5370\u6620\u50cf\u53ca\u53d8\u6362\u65b9\u6cd5 \u5168\u76f8\u8fde\uff1a\u6548\u7387\u9ad8\uff0c\u4ef7\u683c\u8d35 \u76f4\u63a5\u76f8\u8fde\uff1a\u6548\u7387\u4f4e\uff0c\u4ef7\u683c\u4f4e \u7ec4\u76f8\u8fde\uff1an = 1 \u65f6\u4e3a\u76f4\u63a5\u76f8\u8fde\uff0cn = N\u65f6\u4e3a\u5168\u76f8\u8fde cache\u66ff\u6362\u7b97\u6cd5 \u8f6e\u6362\u6cd5\uff1a\u66ff\u6362\u8ba1\u6570\u5668\u6700\u5927\u7684 LRU cache\u7684\u4e00\u81f4\u6027 \u5199\u76f4\u8fbe \u5199\u56de\u6cd5\uff1a\u66ff\u6362\u65f6\u5199\u56de \u8865\u5145\uff1a\u5b58\u50a8\u5668\u8bbf\u95ee \u9ad8\u4f4d\u4ea4\u53c9\uff1a\u63d0\u9ad8\u5bb9\u91cf \u4f4e\u4f4d\u4ea4\u53c9\uff1a\u63d0\u9ad8\u8bbf\u95ee\u901f\u5ea6\uff0c\u89e3\u51b3\u8bbf\u95ee\u51b2\u7a81 \u7b2c\u56db\u7ae0 \u6d41\u6c34\u7ebf \u5148\u884c\u63a7\u5236\u6280\u672f \u7f13\u51b2\u6280\u672f \u9884\u5904\u7406\u6280\u672f \u5148\u884c\u6307\u4ee4\u7f13\u51b2\u6808\u7684\u4f5c\u7528 \u53ea\u8981\u6307\u4ee4\u7f13\u51b2\u6808\u6ca1\u6709\u6ee1\uff0c\u5c31\u81ea\u52a8\u53d1\u51fa\u53d6\u6307\u4ee4\u7684\u8bf7\u6c42 \u6d41\u6c34\u7ebf\u7279\u70b9 \u53ea\u6709\u8fde\u7eed\u63d0\u4f9b\u540c\u7c7b\u4efb\u52a1\u624d\u80fd\u53d1\u6325\u6d41\u6c34\u7ebf\u6548\u7387 \u6bcf\u4e2a\u6d41\u6c34\u6bb5\u90fd\u8981\u8bbe\u7f6e\u4e00\u4e2a\u6d41\u6c34\u5bc4\u5b58\u5668 \u5404\u6d41\u6c34\u6bb5\u7684\u6c34\u95f4\u5e94\u5c3d\u91cf\u60f3\u7b49 \u6d41\u6c34\u7ebf\u6027\u80fd\u5206\u6790\u6307\u6807 \u541e\u5410\u7387(Though Put) $$ \\begin{align} \\mathbf{T} {p} &= \\frac{\\mathbf{n}}{\\mathbf{T} {k}}\\ \\mathbf{T} {k} &= (k+n-1)\\cdot \\triangle t,k\u4e3a\u6d41\u6c34\u7ebf\u6bb5\u6570,n\u4e3a\u4efb\u52a1\u6570\\ \\mathbf{T} {p}\\max &= \\frac{1}{\\triangle t} \\end{align} $$ \u52a0\u901f\u6bd4 \\begin{align} S &= \\frac{T_0}{T_k} = \\frac{k \\cdot n \\cdot \\triangle t}{(k+n-1)\\cdot \\triangle t} \\\\ S\\max &= k \\end{align} \\begin{align} S &= \\frac{T_0}{T_k} = \\frac{k \\cdot n \\cdot \\triangle t}{(k+n-1)\\cdot \\triangle t} \\\\ S\\max &= k \\end{align} \u6548\u7387 \\begin{align} E &= \\frac{\u987a\u5e8f\u6267\u884c\u7684\u65f6\u7a7a\u533a}{k\u4e2a\u6d41\u6c34\u6bb5\u7684\u603b\u65f6\u7a7a\u533a} = \\frac{T_{0}}{k\\cdot T_{k}} \\\\ & = \\frac{k \\cdot n \\cdot \\triangle t}{k\\cdot(k+n-1)\\cdot \\triangle t} \\\\ & = \\frac{n}{k+n-1} \\end{align} \\begin{align} E &= \\frac{\u987a\u5e8f\u6267\u884c\u7684\u65f6\u7a7a\u533a}{k\u4e2a\u6d41\u6c34\u6bb5\u7684\u603b\u65f6\u7a7a\u533a} = \\frac{T_{0}}{k\\cdot T_{k}} \\\\ & = \\frac{k \\cdot n \\cdot \\triangle t}{k\\cdot(k+n-1)\\cdot \\triangle t} \\\\ & = \\frac{n}{k+n-1} \\end{align} \u5c0f\u8282\uff1a\u541e\u5410\u7387\u770b\u7a7a\u95f4\uff0c\u52a0\u901f\u6bd4\u770b\u65f6\u95f4\uff0c\u6548\u7387\u7ed3\u5408\u8d77\u6765\u770b \u6d41\u6c34\u7ebf\u6d88\u9664\u74f6\u9888 \u5c06\u74f6\u9888\u90e8\u5206\u518d\u7ec6\u5206 \u5c06\u74f6\u9888\u90e8\u5206\u91cd\u590d\u8bbe\u7f6e \u4e71\u5e8f\u6d41\u52a8\u4e2d\u7684\u6570\u636e\u76f8\u5173\uff08\u5192\u9669\uff0c\u7ade\u4e89\uff09 \u5199\u8bfb\u76f8\u5173 \u8bfb\u5199\u76f8\u5173 \u5199\u5199\u76f8\u5173 \u89e3\u51b3\uff1a\u5efa\u7acb\u76f8\u5173\u4e13\u7528\u901a\u8def\uff08ByPass\uff09 \u591a\u6d41\u6c34\u7ebf\u8c03\u5ea6\u7b56\u7565 \u987a\u5e8f\u53d1\u5c04\u987a\u5e8f\u5b8c\u6210 \u987a\u5e8f\u53d1\u5c04\u4e71\u5e8f\u5b8c\u6210 \u4e71\u5e8f\u53d1\u5c04\u4e71\u5e8f\u5b8c\u6210 \u8d85\u6807\u91cf\u5904\u7406\u673a\u91c7\u7528\u7684\u662f\u7a7a\u95f4\u5e76\u884c\u6027\u3002 \u8d85\u6d41\u6c34\u7ebf\u5904\u7406\u673a\u91c7\u7528\u7684\u662f\u65f6\u95f4\u5e76\u884c\u6027\u3002 \uff1a\u6bcf\u96941/n\u4e2a\u65f6\u949f\u5468\u671f\u53d1\u5c04\u4e00\u6761\u6307\u4ee4 11\u7ae0\uff1a\u4e92\u8054\u7f51\u7edc \u65b9\u4f53\u7f6e\u6362\u51fd\u6570\uff1a\u5f62\u6210\u6b63\u65b9\u4f53 $ Cube_{0}$ \u8868\u793a\u7b2c 0 \u4f4d\u53d6\u53cd \u5176\u4ed6\u4f4d\u4e0d\u53d8 \u5982 8 \u4e2a\u8282\u70b9 $$ {Cube_{2}(b_{2}b_{1}b_{0})=\\overline{b} {2}b {1}b_{0}} $$ \u6df7\u6d17\u7f6e\u6362 Shuffle\uff1a\u7f16\u7801\u79fb\u4f4d Shuffle(b_{n-1}b_{n-2}\u2026b_{1}b_{0})=(b_{n-2}\u2026b_{1}b_{0}b_{n-1})\uff1b Shuffle(b_{n-1}b_{n-2}\u2026b_{1}b_{0})=(b_{n-2}\u2026b_{1}b_{0}b_{n-1})\uff1b \u8776\u5f0f\u7f6e\u6362 Butterfly\uff1a\u7f16\u7801**\u4f4d**\u4ea4\u6362 \\beta (b_{n-1}b_{n-2}\u2026b_{1}b_{0})=(b_{0}b_{n-2}\u2026b_{1}b_{n-1})\uff1b \\beta (b_{n-1}b_{n-2}\u2026b_{1}b_{0})=(b_{0}b_{n-2}\u2026b_{1}b_{n-1})\uff1b \u5b50\u8776\u5f0f\uff1a \\beta_{(k)} \\beta_{(k)} \u7528 b_{0} b_{0} \u548c b_{k} b_{k} \u4ea4\u6362 \u8d85\u8776\u5f0f\uff1a \\beta_{(k)} \\beta_{(k)} \u7528 b_{n-k-1} b_{n-k-1} \u548c b_{n-1} b_{n-1} \u4ea4\u6362 \u79fb\u6570\u7f6e\u6362\uff1a $$ a(X) = (X + k) \\% N $$ \u7279\u4f8b\uff1a\u52a0\u51cf 2^i 2^i \u7f6e\u6362 PM2I_{+i}(j) = (j+2^i) \\% N \\\\ PM2I_{-i}(j) = (j-2^i) \\% N \\\\ PM2I_{+i}(j) = (j+2^i) \\% N \\\\ PM2I_{-i}(j) = (j-2^i) \\% N \\\\ \u8865\u5145 SIMD \u5b9a\u4e49 \u63cf\u8ff0 \u7279\u70b9 \u5b9a\u4e49\uff1a\u5355\u6307\u4ee4\u591a\u6570\u636e\u6d41\uff0c\u662f\u5355\u4e00\u63a7\u5236\u90e8\u4ef6\u4e0b\u591a\u4e2a\u5904\u7406\u5355\u5143\u6784\u6210\u7684\u9635\u5217 MIMD \u5b9a\u4e49 \u63cf\u8ff0 \u5b9a\u4e49\uff1a\u591a\u6307\u4ee4\u591a\u6570\u636e\u6d41\uff0c\u6bd4\u5982\u591a\u5904\u7406\u673a\u7cfb\u7edf \u5e76\u884c\u6027\u7b49\u7ea7\u7684\u5212\u5206(\u4ece\u6570\u636e\u5904\u7406\u89d2\u5ea6) \u5b57\u4e32\u4f4d\u4e32\uff1a\u540c\u4e00\u5b57\u540c\u4e00\u4f4d \u5b57\u4e32\u4f4d\u5e76\uff1a\u540c\u4e00\u5b57\u6240\u4ee5\u4f4d \u5b57\u5e76\u4f4d\u4e32\uff1a\u591a\u4e2a\u5b57\u540c\u4e00\u4f4d \u5b57\u5e76\u4f4d\u5e76\uff1a\u591a\u4e2a\u5b57\u591a\u4e2a\u4f4d \u5e76\u884c\u6027\u7b49\u7ea7 \u6307\u4ee4\u5185\u90e8\u5e76\u884c \u6307\u4ee4\u95f4\u5e76\u884c \u4efb\u52a1\u7ea7\u6216\u8fc7\u7a0b\u7ea7 \u4f5c\u4e1a\u6216\u7a0b\u5e8f\u7ea7","title":"Architecture"},{"location":"\u4f53\u7cfb\u7ed3\u6784\u590d\u4e60/#_1","text":"","title":"\u4f53\u7cfb\u7ed3\u6784\u590d\u4e60"},{"location":"\u4f53\u7cfb\u7ed3\u6784\u590d\u4e60/#_2","text":"Amdahl \u5b9a\u7406 Amdahl\u5b9a\u7406\u63cf\u8ff0\u4e86\u6539\u8fdb**\u53ef\u5e76\u884c**\u90e8\u5206\u540e\u8ba1\u7b97\u673a\u7cfb\u7edf**\u6574\u4f53**\u7684\u52a0\u901f\u6bd4\u4f8b \u200b \u4e66\u4e0a\u7684\u5b9a\u7406 \\begin{align} Fe &= \\frac{T_{\u53ef\u5e76\u884c}}{T_{\u603b}}\\\\ Se &= \\frac{T_{\u53ef\u5e76\u884c}}{T'_{\u53ef\u5e76\u884c}}\uff08T'_{\u53ef\u5e76\u884c}\u8868\u793a\u6539\u8fdb\u540eT_{\u53ef\u5e76\u884c}\u9700\u8981\u7684\u65f6\u95f4)\\\\ &\u90a3\u4e48:\\\\ T'_{\u603b} &= T_{\u603b}((1-Fe) + \\frac{Fe}{Se}) ,(\u53bb\u9664\u4e0d\u53ef\u5e76\u884c\u7684\u90e8\u5206\uff0c\u7136\u540e\u4e58\u4e0a\u53ef\u5e76\u884c\u90e8\u5206\u7684\u52a0\u901f\u6bd4\u4f8b)\\\\ &\u56e0\u6b64\u6539\u8fdb\u540e\u6574\u4e2a\u4efb\u52a1\u7684\u52a0\u901f\u6bd4\u4e3a:\\\\ Sn &= \\frac{T_{\u603b}}{T'_{\u603b}} = \\frac{1}{(1-Fe) + \\frac{Fe}{Se}} \\end{align} \\begin{align} Fe &= \\frac{T_{\u53ef\u5e76\u884c}}{T_{\u603b}}\\\\ Se &= \\frac{T_{\u53ef\u5e76\u884c}}{T'_{\u53ef\u5e76\u884c}}\uff08T'_{\u53ef\u5e76\u884c}\u8868\u793a\u6539\u8fdb\u540eT_{\u53ef\u5e76\u884c}\u9700\u8981\u7684\u65f6\u95f4)\\\\ &\u90a3\u4e48:\\\\ T'_{\u603b} &= T_{\u603b}((1-Fe) + \\frac{Fe}{Se}) ,(\u53bb\u9664\u4e0d\u53ef\u5e76\u884c\u7684\u90e8\u5206\uff0c\u7136\u540e\u4e58\u4e0a\u53ef\u5e76\u884c\u90e8\u5206\u7684\u52a0\u901f\u6bd4\u4f8b)\\\\ &\u56e0\u6b64\u6539\u8fdb\u540e\u6574\u4e2a\u4efb\u52a1\u7684\u52a0\u901f\u6bd4\u4e3a:\\\\ Sn &= \\frac{T_{\u603b}}{T'_{\u603b}} = \\frac{1}{(1-Fe) + \\frac{Fe}{Se}} \\end{align} \u6982\u5ff5:\u4e3a\u4ec0\u4e48\u53d1\u5c55\u8ba1\u7b97\u673a\u7cfb\u7edf\u7ed3\u6784 \u4f53\u7cfb\u7ed3\u6784\uff1a\u7814\u7a76**\u8f6f\u786c\u4ef6\u529f\u80fd\u5206\u914d**\u548c**\u8f6f\u786c\u4ef6\u754c\u9762** \u7ec4\u6210\u539f\u7406\uff1a\u903b\u8f91\u5b9e\u73b0 \u5b9e\u73b0\uff1a\u7269\u7406\u5b9e\u73b0 \ud83c\udf30\uff1a \u786e\u5b9a\u662f\u5426\u9700\u8981\u4e58\u9664\u6307\u4ee4 -- \u7cfb\u7edf\u7ed3\u6784 \u4e58\u9664\u6307\u4ee4\u7528\u4e58\u6cd5\u5668\u8fd8\u662f\u52a0\u6cd5\u5668\u5b9e\u73b0 -- \u7ec4\u6210\u539f\u7406 \u4e58\u6cd5\u5668\u6216\u52a0\u6cd5\u5668\u7684\u7269\u7406\u5b9e\u73b0 -- \u5b9e\u73b0 \u6a21\u62df\u548c\u4eff\u771f \u6a21\u62df\uff1a\u8f6f\u4ef6\u5b9e\u73b0\uff08\u5bbf\u4e3b\u673a\uff0c\u865a\u62df\u673a\uff09\uff0c\u7075\u6d3b\u4f46\u662f\u901f\u5ea6\u6162 \u4eff\u771f\uff1a\u786c\u4ef6\u5b9e\u73b0\uff08\u5bbf\u4e3b\u673a\uff0c\u76ee\u6807\u673a\uff09\uff0c\u901f\u5ea6\u5feb\u4f46\u662f\u4e0d\u7075\u6d3b CPU\u6027\u80fd\u516c\u5f0f \\mathbf{CPI} = \\frac{\\mathbf{CPU}\u65f6\u949f\u5468\u671f\u603b\u6570}{\u6307\u4ee4\u6761\u6570} \\\\ T_\\mathbf{CPU} = T_{0} \\times \\sum_{i=1}^n(\\mathbf{CPI}_{i}\\times \\mathbf{I}_{i})\\\\ \\mathbf{CPI} = \\frac{\\mathbf{CPU}\u65f6\u949f\u5468\u671f\u603b\u6570}{\u6307\u4ee4\u6761\u6570} \\\\ T_\\mathbf{CPU} = T_{0} \\times \\sum_{i=1}^n(\\mathbf{CPI}_{i}\\times \\mathbf{I}_{i})\\\\ \u4e00\u4e9b\u8868\u793a\u8861\u91cf\u6307\u4ee4\u6267\u884c\u901f\u5ea6\u7684\u5355\u4f4d MIPS(Million instructions per second)\uff0cGIPS\uff0cTIPS\u3002IPC\u4e3aInstructions per cycle $$ \\begin{align} \\mathbf{MIPS} &= \\frac{\u6307\u4ee4\u6761\u6570}{\u6307\u4ee4\u6267\u884c\u65f6\u95f4\\times10^6}=\\mathbf{f}\\times\\mathbf{IPC} \\ \\mathbf{GIPS} &= \\frac{\u6307\u4ee4\u6761\u6570}{\u6307\u4ee4\u6267\u884c\u65f6\u95f4\\times10^9}=\\mathbf{f}\\times\\mathbf{IPC} \\ \\mathbf{TIPS} &= \\frac{\u6307\u4ee4\u6761\u6570}{\u6307\u4ee4\u6267\u884c\u65f6\u95f4\\times10^{12}}=\\mathbf{f}\\times\\mathbf{IPC}\\ \\end{align} $$ \u8bbe\u8ba1\u65b9\u6cd5 \u81ea\u4e0a\u800c\u4e0b\uff1a\u4e13\u7528\u8ba1\u7b97\u673a \u81ea\u4e0b\u800c\u4e0a\uff1a\u901a\u7528\uff0c\u6548\u7387\u4f4e \u4e2d\u95f4\u5f00\u59cb\uff1a\u5408\u7406 \u4f5b\u6797\u5206\u7c7b\u6cd5 \u6309\u7167**\u6307\u4ee4\u6d41\u548c\u6570\u636e\u6d41\u7684\u591a\u500d\u578b\u7279\u5f81**\u8fdb\u884c\u5206\u7c7b \u6307\u4ee4\u6d41\uff1a\u673a\u5668\u6267\u884c\u7684\u6307\u4ee4\u5e8f\u5217 \u6570\u636e\u6d41\uff1a\u7531\u6307\u4ee4\u6d41\u8c03\u7528\u7684\u6570\u636e\u5e8f\u5217 \u591a\u500d\u6027\uff1a\u6700\u5927\u53ef\u80fd\u6570 S\uff1asingle|M\uff1amultiple|I\uff1aInstruction|D\uff1aDatasteam \u4e8e\u662f\u5206\u6210\uff1a SISD\uff1a\u6807\u91cf\u6d41\u6c34\u5904\u7406\u673a SIMD\uff1a\u5e76\u884c\u3001\u5411\u91cf\u3001\u8d85\u6d41\u6c34\u7ebf MIMD\uff1a\u51e0\u4e4e\u4e0d\u5b58\u5728 MIMD\uff1a\u4e0d\u5b58\u5728 \u7f3a\u70b9\uff1a \u5206\u7c7b\u7c97\uff08SIMD\u4e2d\u5305\u542b\u591a\u79cd\uff09 \u6570\u636e\u6d41\u53d7\u6307\u4ee4\u6d41\u63a7\u5236\uff08MISD\u4e0d\u53ef\u80fd\u5b58\u5728\uff09 \u51af\u6c0f\u5206\u7c7b \u7528\u6700\u5927\u5e76\u884c\u5ea6\u6765\u5206\u7c7b\uff0c\u5047\u8bbe\u540c\u65f6\u5904\u7406\u7684\u5b57\u6570 m m \uff0c\u5b57\u7684\u4e8c\u8fdb\u5236\u4f4d\u6570 n n \uff0c\u7528 (m,n) (m,n) \u8868\u793a \u7f3a\u70b9\u662f\u53ea\u8003\u8651\u6570\u636e\u5e76\u884c \u6c49\u5fb7\u52d2\u5206\u7c7b \u591a\u5c42\u6b21\u5206\u7c7b \u8865\u5145\uff1a\u8ba1\u7b97\u673a\u7cfb\u7edf\u7684\u5c42\u6b21\u7ed3\u6784 \u51710-6\u5c42\u3002 0-1\u5c42CPU\u529f\u80fd\uff1a\u786c\u8054\u903b\u8f91\uff0c\u5fae\u7a0b\u5e8f 2\u5c42\u8f6f\u786c\u4ef6\u5206\u754c\uff1a\u673a\u5668\u8bed\u97f3 3-5\u5c42\u7cfb\u7edf\u8f6f\u4ef6\uff1a\u64cd\u4f5c\u7cfb\u7edf\uff0c\u6c47\u7f16\u8bed\u8a00\uff0c\u9ad8\u7ea7\u8bed\u8a00 6\u5c42\u5e94\u7528\u8f6f\u4ef6\uff1a\u5e94\u7528\u7a0b\u5e8f \u8865\u5145\uff1a\u7cfb\u5217\u673a \u5177\u6709\u76f8\u540c\u7684\u7cfb\u7edf\u7ed3\u6784\uff0c\u4f46\u662f\u7ec4\u6210\u548c\u5b9e\u73b0\u6280\u672f\u4e0d\u540c\u7684\u8ba1\u7b97\u673a\u7cfb\u7edf\u3010\u6027\u80fd\uff0c\u4ef7\u683c\u3011 \u8865\u5145\uff1a\u865a\u62df\u673a \u7531\u8f6f\u4ef6\u5b9e\u73b0\u7684\u673a\u5668","title":"\u7b2c\u4e00\u7ae0"},{"location":"\u4f53\u7cfb\u7ed3\u6784\u590d\u4e60/#_3","text":"\u6570\u636e\u7c7b\u578b \u6570\u636e\u8868\u793a\uff1a\u8ba1\u7b97\u673a\u786c\u4ef6\u80fd\u591f\u76f4\u63a5\u8bc6\u522b\uff0c\u88ab\u6307\u4ee4\u7cfb\u7edf\u76f4\u63a5\u8c03\u7528\u7684\u6570\u636e\u7c7b\u578b \u6570\u636e\u7ed3\u6784\uff1a\u8f6f\u4ef6\u5b9e\u73b0\u7684\u6570\u636e\u8868\u793a\uff0c\u7b97\u6cd5 \ud83c\udf30\uff1a C = A + B \uff081\uff09\u65e0\u5411\u91cf\u6570\u636e\u8868\u793a\uff1a\u9700\u89814\u6761\u6307\u4ee4 \uff082\uff09\u6709\u5411\u91cf\u6570\u636e\u8868\u793a\uff1a\u9700\u89811\u6761\u6307\u4ee4 \u6307\u4ee4\u7ec4\u6210 \u64cd\u4f5c\u7801\uff1a\u64cd\u4f5c\u79cd\u7c7b\uff0c\u64cd\u4f5c\u6570\u63cf\u8ff0 \u5730\u5740\u7801\uff1a\u5730\u5740\uff0c\u5730\u5740\u9644\u52a0\u4fe1\u606f\uff0c\u5bfb\u5740\u65b9\u5f0f \u64cd\u4f5c\u7801\u4e09\u79cd\u7f16\u7801\u65b9\u5f0f\uff1a \u56fa\u5b9a\u957f\u5ea6 Huffman\uff1a\uff08\u624b\u5de5\uff1a\u81ea\u4e0a\u800c\u4e0b\u7f16\u7801\uff09 \u6269\u5c55\u7f16\u7801\uff1a\u7531\u56fa\u5b9a\u957f\u64cd\u4f5c\u7801\u4e0eHuffman\u7f16\u7801\u7ed3\u5408 \u5730\u5740\u7801\u7684\u4f18\u5316\u8bbe\u8ba1 \u5b58\u50a8\u5bb9\u91cf \u6267\u884c\u901f\u5ea6 \u6307\u4ee4\u7cfb\u7edf\u7684\u4e8c\u516b\u5b9a\u5f8b \u7b80\u5355\u6307\u4ee4\u536020%\uff0c\u51fa\u73b0\u9891\u738780% \u590d\u6742\u6307\u4ee4\u536080%\uff0c\u51fa\u73b0\u9891\u738720% \u8865\u5145\uff1aRISC\u7684\u5b9a\u4e49\u3001\u7279\u70b9\u548c\u7ec6\u60f3\u7cbe\u534e \u5b9a\u4e49\uff1a\u7cbe\u7b80\u6307\u4ee4\u7cfb\u7edf\u2014\u2014\u53ea\u4fdd\u7559\u529f\u80fd\u7b80\u5355\uff0c\u80fd\u5728\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u5185\u5b8c\u6210\u7684\u6307\u4ee4\uff0c\u5176\u4ed6\u590d\u6742\u529f\u80fd\u7528\u4e00\u6bb5\u5b50\u7a0b\u5e8f\u5b9e\u73b0 \u7279\u70b9\uff1a\u5355\u5468\u671f\u3001\u56fa\u5b9a\u6307\u4ee4\u683c\u5f0f\u3001\u7f16\u8bd1\u4f18\u5316\u3001\u51cf\u5c11\u6307\u4ee4\u548c\u5bfb\u5740\u65b9\u5f0f\u79cd\u7c7b|LOAD/STORE\uff0c\u786c\u5e03\u7ebf\u63a7\u5236\u903b\u8f91 \u601d\u60f3\u7cbe\u534e\uff1a\u51cf\u5c11 \\mathbf{CPI} \\mathbf{CPI}","title":"\u7b2c\u4e8c\u7ae0"},{"location":"\u4f53\u7cfb\u7ed3\u6784\u590d\u4e60/#_4","text":"\u5b9a\u4e49 \\begin{align} \\mathbf{price}(\u4fbf\u5b9c + \u8d35) &\\simeq \\mathbf{price}(\u4fbf\u5b9c) \\\\ \\mathbf{speed}(\u4fbf\u5b9c + \u8d35) &\\simeq \\mathbf{speed}(\u8d35) \\\\ \\mathbf{capacity}(\u4fbf\u5b9c + \u8d35) &\\simeq \\mathbf{capacity}(\u4fbf\u5b9c) \\\\ \\end{align} \\begin{align} \\mathbf{price}(\u4fbf\u5b9c + \u8d35) &\\simeq \\mathbf{price}(\u4fbf\u5b9c) \\\\ \\mathbf{speed}(\u4fbf\u5b9c + \u8d35) &\\simeq \\mathbf{speed}(\u8d35) \\\\ \\mathbf{capacity}(\u4fbf\u5b9c + \u8d35) &\\simeq \\mathbf{capacity}(\u4fbf\u5b9c) \\\\ \\end{align} \u8bbf\u95ee\u6548\u7387 \\mathbf{e} = \\frac{T_{1}}{T} = \\frac{T_{1}}{H \\times T_{!} + (1-H)\\times T_{2}} \\mathbf{e} = \\frac{T_{1}}{T} = \\frac{T_{1}}{H \\times T_{!} + (1-H)\\times T_{2}} \u9884\u53d6\u6280\u672f\u63d0\u9ad8\u8bbf\u95ee\u7387 \\mathbf{e'} = \\frac{\\mathbf{e} -1 + \\mathbf{n}}{\\mathbf{n}},\\mathbf{n} = \u5757\u5927\u5c0f\\times \u91cd\u590d\u5229\u7528\u7387 \\mathbf{e'} = \\frac{\\mathbf{e} -1 + \\mathbf{n}}{\\mathbf{n}},\\mathbf{n} = \u5757\u5927\u5c0f\\times \u91cd\u590d\u5229\u7528\u7387 \u865a\u62df\u5b58\u50a8\u5668\u52a0\u5feb\u5185\u90e8\u5730\u5740\u53d8\u6362\u7684\u65b9\u6cd5 \u9875\u8868\u7ea7\u6570 g = \\left \\lfloor \\frac{\\log_{2}N_{v}-\\log_{2}N_{p}} {\\log_{2}N_{p}-\\log_{2}N_{d}} \\right \\rfloor\\\\ N_{v}\u4e3a\u865a\u62df\u5b58\u50a8\u7a7a\u95f4\u5927\u5c0f\uff0cN_{p}\u4e3a\u9875\u9762\u5927\u5c0f\uff0cN_{d}\u4e3a\u4e00\u4e2a\u9875\u8868\u5b58\u50a8\u5b57\u5927\u5c0f g = \\left \\lfloor \\frac{\\log_{2}N_{v}-\\log_{2}N_{p}} {\\log_{2}N_{p}-\\log_{2}N_{d}} \\right \\rfloor\\\\ N_{v}\u4e3a\u865a\u62df\u5b58\u50a8\u7a7a\u95f4\u5927\u5c0f\uff0cN_{p}\u4e3a\u9875\u9762\u5927\u5c0f\uff0cN_{d}\u4e3a\u4e00\u4e2a\u9875\u8868\u5b58\u50a8\u5b57\u5927\u5c0f \u65b9\u6cd5\uff1a \u76ee\u5f55\u8868 \u5feb\u6162\u8868 \u6563\u5217\u51fd\u6570 \u5806\u6808\u578b\u7b97\u6cd5 \u968f\u7740\u5206\u914d\u7ed9\u7a0b\u5e8f\u7684\u4e3b\u5b58\u9875\u9762\u589e\u52a0\uff0c\u4e3b\u5b58\u7684\u547d\u4e2d\u7387\u4e5f\u63d0\u9ad8\uff0c\u81f3\u5c11\u4e0d\u4e0b\u964d Cache\u5b58\u50a8\u7cfb\u7edf\u5730\u5740\u5370\u6620\u50cf\u53ca\u53d8\u6362\u65b9\u6cd5 \u5168\u76f8\u8fde\uff1a\u6548\u7387\u9ad8\uff0c\u4ef7\u683c\u8d35 \u76f4\u63a5\u76f8\u8fde\uff1a\u6548\u7387\u4f4e\uff0c\u4ef7\u683c\u4f4e \u7ec4\u76f8\u8fde\uff1an = 1 \u65f6\u4e3a\u76f4\u63a5\u76f8\u8fde\uff0cn = N\u65f6\u4e3a\u5168\u76f8\u8fde cache\u66ff\u6362\u7b97\u6cd5 \u8f6e\u6362\u6cd5\uff1a\u66ff\u6362\u8ba1\u6570\u5668\u6700\u5927\u7684 LRU cache\u7684\u4e00\u81f4\u6027 \u5199\u76f4\u8fbe \u5199\u56de\u6cd5\uff1a\u66ff\u6362\u65f6\u5199\u56de \u8865\u5145\uff1a\u5b58\u50a8\u5668\u8bbf\u95ee \u9ad8\u4f4d\u4ea4\u53c9\uff1a\u63d0\u9ad8\u5bb9\u91cf \u4f4e\u4f4d\u4ea4\u53c9\uff1a\u63d0\u9ad8\u8bbf\u95ee\u901f\u5ea6\uff0c\u89e3\u51b3\u8bbf\u95ee\u51b2\u7a81","title":"\u5b58\u50a8\u7cfb\u7edf"},{"location":"\u4f53\u7cfb\u7ed3\u6784\u590d\u4e60/#_5","text":"\u5148\u884c\u63a7\u5236\u6280\u672f \u7f13\u51b2\u6280\u672f \u9884\u5904\u7406\u6280\u672f \u5148\u884c\u6307\u4ee4\u7f13\u51b2\u6808\u7684\u4f5c\u7528 \u53ea\u8981\u6307\u4ee4\u7f13\u51b2\u6808\u6ca1\u6709\u6ee1\uff0c\u5c31\u81ea\u52a8\u53d1\u51fa\u53d6\u6307\u4ee4\u7684\u8bf7\u6c42 \u6d41\u6c34\u7ebf\u7279\u70b9 \u53ea\u6709\u8fde\u7eed\u63d0\u4f9b\u540c\u7c7b\u4efb\u52a1\u624d\u80fd\u53d1\u6325\u6d41\u6c34\u7ebf\u6548\u7387 \u6bcf\u4e2a\u6d41\u6c34\u6bb5\u90fd\u8981\u8bbe\u7f6e\u4e00\u4e2a\u6d41\u6c34\u5bc4\u5b58\u5668 \u5404\u6d41\u6c34\u6bb5\u7684\u6c34\u95f4\u5e94\u5c3d\u91cf\u60f3\u7b49 \u6d41\u6c34\u7ebf\u6027\u80fd\u5206\u6790\u6307\u6807 \u541e\u5410\u7387(Though Put) $$ \\begin{align} \\mathbf{T} {p} &= \\frac{\\mathbf{n}}{\\mathbf{T} {k}}\\ \\mathbf{T} {k} &= (k+n-1)\\cdot \\triangle t,k\u4e3a\u6d41\u6c34\u7ebf\u6bb5\u6570,n\u4e3a\u4efb\u52a1\u6570\\ \\mathbf{T} {p}\\max &= \\frac{1}{\\triangle t} \\end{align} $$ \u52a0\u901f\u6bd4 \\begin{align} S &= \\frac{T_0}{T_k} = \\frac{k \\cdot n \\cdot \\triangle t}{(k+n-1)\\cdot \\triangle t} \\\\ S\\max &= k \\end{align} \\begin{align} S &= \\frac{T_0}{T_k} = \\frac{k \\cdot n \\cdot \\triangle t}{(k+n-1)\\cdot \\triangle t} \\\\ S\\max &= k \\end{align} \u6548\u7387 \\begin{align} E &= \\frac{\u987a\u5e8f\u6267\u884c\u7684\u65f6\u7a7a\u533a}{k\u4e2a\u6d41\u6c34\u6bb5\u7684\u603b\u65f6\u7a7a\u533a} = \\frac{T_{0}}{k\\cdot T_{k}} \\\\ & = \\frac{k \\cdot n \\cdot \\triangle t}{k\\cdot(k+n-1)\\cdot \\triangle t} \\\\ & = \\frac{n}{k+n-1} \\end{align} \\begin{align} E &= \\frac{\u987a\u5e8f\u6267\u884c\u7684\u65f6\u7a7a\u533a}{k\u4e2a\u6d41\u6c34\u6bb5\u7684\u603b\u65f6\u7a7a\u533a} = \\frac{T_{0}}{k\\cdot T_{k}} \\\\ & = \\frac{k \\cdot n \\cdot \\triangle t}{k\\cdot(k+n-1)\\cdot \\triangle t} \\\\ & = \\frac{n}{k+n-1} \\end{align} \u5c0f\u8282\uff1a\u541e\u5410\u7387\u770b\u7a7a\u95f4\uff0c\u52a0\u901f\u6bd4\u770b\u65f6\u95f4\uff0c\u6548\u7387\u7ed3\u5408\u8d77\u6765\u770b \u6d41\u6c34\u7ebf\u6d88\u9664\u74f6\u9888 \u5c06\u74f6\u9888\u90e8\u5206\u518d\u7ec6\u5206 \u5c06\u74f6\u9888\u90e8\u5206\u91cd\u590d\u8bbe\u7f6e \u4e71\u5e8f\u6d41\u52a8\u4e2d\u7684\u6570\u636e\u76f8\u5173\uff08\u5192\u9669\uff0c\u7ade\u4e89\uff09 \u5199\u8bfb\u76f8\u5173 \u8bfb\u5199\u76f8\u5173 \u5199\u5199\u76f8\u5173 \u89e3\u51b3\uff1a\u5efa\u7acb\u76f8\u5173\u4e13\u7528\u901a\u8def\uff08ByPass\uff09 \u591a\u6d41\u6c34\u7ebf\u8c03\u5ea6\u7b56\u7565 \u987a\u5e8f\u53d1\u5c04\u987a\u5e8f\u5b8c\u6210 \u987a\u5e8f\u53d1\u5c04\u4e71\u5e8f\u5b8c\u6210 \u4e71\u5e8f\u53d1\u5c04\u4e71\u5e8f\u5b8c\u6210 \u8d85\u6807\u91cf\u5904\u7406\u673a\u91c7\u7528\u7684\u662f\u7a7a\u95f4\u5e76\u884c\u6027\u3002 \u8d85\u6d41\u6c34\u7ebf\u5904\u7406\u673a\u91c7\u7528\u7684\u662f\u65f6\u95f4\u5e76\u884c\u6027\u3002 \uff1a\u6bcf\u96941/n\u4e2a\u65f6\u949f\u5468\u671f\u53d1\u5c04\u4e00\u6761\u6307\u4ee4","title":"\u7b2c\u56db\u7ae0 \u6d41\u6c34\u7ebf"},{"location":"\u4f53\u7cfb\u7ed3\u6784\u590d\u4e60/#11","text":"\u65b9\u4f53\u7f6e\u6362\u51fd\u6570\uff1a\u5f62\u6210\u6b63\u65b9\u4f53 $ Cube_{0}$ \u8868\u793a\u7b2c 0 \u4f4d\u53d6\u53cd \u5176\u4ed6\u4f4d\u4e0d\u53d8 \u5982 8 \u4e2a\u8282\u70b9 $$ {Cube_{2}(b_{2}b_{1}b_{0})=\\overline{b} {2}b {1}b_{0}} $$ \u6df7\u6d17\u7f6e\u6362 Shuffle\uff1a\u7f16\u7801\u79fb\u4f4d Shuffle(b_{n-1}b_{n-2}\u2026b_{1}b_{0})=(b_{n-2}\u2026b_{1}b_{0}b_{n-1})\uff1b Shuffle(b_{n-1}b_{n-2}\u2026b_{1}b_{0})=(b_{n-2}\u2026b_{1}b_{0}b_{n-1})\uff1b \u8776\u5f0f\u7f6e\u6362 Butterfly\uff1a\u7f16\u7801**\u4f4d**\u4ea4\u6362 \\beta (b_{n-1}b_{n-2}\u2026b_{1}b_{0})=(b_{0}b_{n-2}\u2026b_{1}b_{n-1})\uff1b \\beta (b_{n-1}b_{n-2}\u2026b_{1}b_{0})=(b_{0}b_{n-2}\u2026b_{1}b_{n-1})\uff1b \u5b50\u8776\u5f0f\uff1a \\beta_{(k)} \\beta_{(k)} \u7528 b_{0} b_{0} \u548c b_{k} b_{k} \u4ea4\u6362 \u8d85\u8776\u5f0f\uff1a \\beta_{(k)} \\beta_{(k)} \u7528 b_{n-k-1} b_{n-k-1} \u548c b_{n-1} b_{n-1} \u4ea4\u6362 \u79fb\u6570\u7f6e\u6362\uff1a $$ a(X) = (X + k) \\% N $$ \u7279\u4f8b\uff1a\u52a0\u51cf 2^i 2^i \u7f6e\u6362 PM2I_{+i}(j) = (j+2^i) \\% N \\\\ PM2I_{-i}(j) = (j-2^i) \\% N \\\\ PM2I_{+i}(j) = (j+2^i) \\% N \\\\ PM2I_{-i}(j) = (j-2^i) \\% N \\\\","title":"11\u7ae0\uff1a\u4e92\u8054\u7f51\u7edc"},{"location":"\u4f53\u7cfb\u7ed3\u6784\u590d\u4e60/#_6","text":"SIMD \u5b9a\u4e49 \u63cf\u8ff0 \u7279\u70b9 \u5b9a\u4e49\uff1a\u5355\u6307\u4ee4\u591a\u6570\u636e\u6d41\uff0c\u662f\u5355\u4e00\u63a7\u5236\u90e8\u4ef6\u4e0b\u591a\u4e2a\u5904\u7406\u5355\u5143\u6784\u6210\u7684\u9635\u5217 MIMD \u5b9a\u4e49 \u63cf\u8ff0 \u5b9a\u4e49\uff1a\u591a\u6307\u4ee4\u591a\u6570\u636e\u6d41\uff0c\u6bd4\u5982\u591a\u5904\u7406\u673a\u7cfb\u7edf \u5e76\u884c\u6027\u7b49\u7ea7\u7684\u5212\u5206(\u4ece\u6570\u636e\u5904\u7406\u89d2\u5ea6) \u5b57\u4e32\u4f4d\u4e32\uff1a\u540c\u4e00\u5b57\u540c\u4e00\u4f4d \u5b57\u4e32\u4f4d\u5e76\uff1a\u540c\u4e00\u5b57\u6240\u4ee5\u4f4d \u5b57\u5e76\u4f4d\u4e32\uff1a\u591a\u4e2a\u5b57\u540c\u4e00\u4f4d \u5b57\u5e76\u4f4d\u5e76\uff1a\u591a\u4e2a\u5b57\u591a\u4e2a\u4f4d \u5e76\u884c\u6027\u7b49\u7ea7 \u6307\u4ee4\u5185\u90e8\u5e76\u884c \u6307\u4ee4\u95f4\u5e76\u884c \u4efb\u52a1\u7ea7\u6216\u8fc7\u7a0b\u7ea7 \u4f5c\u4e1a\u6216\u7a0b\u5e8f\u7ea7","title":"\u8865\u5145"},{"location":"\u6570\u636e\u5e93\u539f\u7406(2)\u590d\u4e60/","text":"\u5426\u5177\u6709\u51fd\u6570\u4f9d\u8d56\u4fdd\u6301\u6027### \u6570\u636e\u5e93\u539f\u7406\uff082\uff09\u590d\u4e60 \u5206\u6570\u5206\u5e03 Components Percentage \u89c4\u8303\u5316\u8bbe\u8ba1 44% \u6570\u636e\u5e93\u8bbe\u8ba1 5% \u6570\u636e\u5e93\u7ba1\u7406 38% \u5bf9\u8c61\u5173\u7cfb\u6570\u636e\u5e93 11% / 2% \u89c4\u8303\u5316\u8bbe\u8ba1 \u5173\u7cfb\u6a21\u5f0f\u7684\u8bbe\u8ba1\u95ee\u9898 \u4e00\u4e2a\u5173\u7cfb\u6a21\u578b\u5305\u62ec\uff08\u5916\u5ef6\uff09\u548c\uff08\u5185\u6db5\uff09\u4e24\u4e2a\u65b9\u9762\u7684\u5185\u5bb9 \u5916\u5ef6\uff1a\u5173\u7cfb\u3001\u8868\u3001\u5f53\u524d\u503c \u5185\u6db5\uff1a\u5bf9\u6570\u636e\u7684\u5b9a\u4e49\u4ee5\u53ca\u5bf9\u6570\u636e\u5b8c\u6574\u6027\u7684\u7ea6\u675f \u5b9e\u9645\u4f7f\u7528\u65f6\uff0c\u7528\u5173\u7cfb\u6a21\u5f0f\u7684\u96c6\u5408 \\rho = \\{R_{1},..,R_{k}\\}\u6765\u4ee3\u66ffR(U) \\rho = \\{R_{1},..,R_{k}\\}\u6765\u4ee3\u66ffR(U) \uff0c \\rho \\rho \u79f0\u4e3a\u6570\u636e\u5e93\u7684\u6a21\u5f0f\uff0c\u5173\u7cfb r r \u662f R R \u7684\u4efb\u610f\u5177\u4f53\u503c\uff0c\u79f0\u4e3a\u6cdb\u5173\u7cfb\u6a21\u5f0f \u5173\u7cfb\u6a21\u5f0f\u7684\u5197\u4f59\u548c\u5f02\u5e38\u95ee\u9898\uff1a \u6570\u636e\u5197\u4f59\u5927 \u63d2\u5165\u3001\u4fee\u6539\u4e0e\u5220\u9664\u5f02\u5e38 \u51fd\u6570\u4f9d\u8d56 \u51fd\u6570\u4f9d\u8d56\u7684\u5b9a\u4e49\uff1a r r \u662f R R \u7684\u4efb\u4e00\u5177\u4f53\u5173\u7cfb\uff0c\u5bf9 r r \u7684\u4efb\u610f\u4e24\u4e2a\u5143\u7ec4 u u \u3001 v v \uff0c\u7531 u[x]=v[x] u[x]=v[x] \u5bfc\u81f4 u[y] = v[y] u[y] = v[y] \u90a3\u4e48 x \\to y x \\to y \u5019\u9009\u7801\u6c42\u89e3\u7b97\u6cd5 \u5c06R\u6240\u6709\u5c5e\u6027\u5206\u4e3aL\u3001R\u3001N\u3001LR\u56db\u7c7b\uff0c\u4ee4X = {L\u3001R}\uff0cY = {LR} \u6c42X\u7684\u95ed\u5305 \u5728Y\u4e2d\u9009\u53d6\u4efb\u610f\u7ec4\u5408\u5c5e\u6027 y_{i} y_{i} \uff0c\u6c42\u95ed\u5305 (Xy_{i}) (Xy_{i}) \u7684\u95ed\u5305 \u5c5e\u6027\u96c6\u95ed\u5305\u6c42\u89e3\u7b97\u6cd5\uff1a X_{0} = X X_{0} = X $X_(i+1) = X_{i} \\cup A,A\u4e3a\u4f7f\u7528X_{i}\u7684\u65b0\u589e\u4f9d\u8d56 $ \u82e5 X_{i+1} =X_{i} X_{i+1} =X_{i} \u9000\u51fa FD\u7684\u6700\u5c0f\u4f9d\u8d56\u96c6 \u4efb\u4e00\u51fd\u6570\u4ee5\u4f9d\u8d56\u53f3\u90e8\u4e3a\u5355\u5c5e\u6027 F\u4e2d\u4efb\u4e00\u51fd\u6570\u4f9d\u8d56 X\\to A X\\to A \uff0c\u4e0d\u5b58\u5728 F-\\{X\\to A\\} F-\\{X\\to A\\} \u7b49\u4e8e F F \uff1a\u6bcf\u4e2a\u51fd\u6570\u4f9d\u8d56\u5de6\u90e8\u6ca1\u6709\u591a\u4f59\u7684\u5c5e\u6027 F\u4e2d\u4efb\u4e00\u51fd\u6570\u4f9d\u8d56 X\\to A X\\to A \uff0cX\u7684\u4efb\u4e00\u771f\u5b50\u96c6Z\uff0c\u4e0d\u5b58\u5728 F-\\{X\\to A\\}\\cup\\{Z\\to A\\} F-\\{X\\to A\\}\\cup\\{Z\\to A\\} \u7b49\u4e8e F F \uff1a\u4e0d\u5b58\u5728\u591a\u4f59\u7684\u51fd\u6570\u4f9d\u8d56 \u6c42FD\u6700\u5c0f\u4f9d\u8d56\u96c6\u7684\u6b65\u9aa4\uff1a\u6ee1\u8db3FD\u6700\u5c0f\u4f9d\u8d56\u96c6\u7684\u5b9a\u4e49\u5373\u53ef \u6ee1\u8db3(1)\uff1a\u5e94\u7528\u5206\u89e3\u89c4\u5219 \u6ee1\u8db3(2)\uff1a\u5e94\u7528\u4f2a\u4f20\u9012 \u6ee1\u8db3(3)\uff1a\u5e94\u7528\u4f20\u9012\u6027 \u5173\u7cfb\u6a21\u5f0f\u7684\u5206\u89e3\u7279\u6027 \u65e0\u635f\u5206\u89e3\uff1a\u539f\u5173\u7cfb\u6a21\u5f0f\u4e0b\u7684\u4efb\u4e00\u5408\u6cd5\u5173\u7cfb\u5b9e\u4f8b\uff0c\u5728\u5206\u89e3\u540e\uff0c\u5e94\u80fd\u901a\u8fc7**\u81ea\u7136\u8fde\u63a5**\u8fd0\u7b97\u6062\u590d\u8d77\u6765\u3002 \u65e0\u635f\u5206\u89e3\u7684\u6d4b\u8bd5\u65b9\u6cd5\uff1a \u6784\u9020\u521d\u59cb\u8868 \u53cd\u590d\u68c0\u6d4b\uff1a\u82e5 A\\to C A\\to C \uff0c\u90a3\u4e48\u5c06 A A \u5217\u4e2d\u76f8\u540c\u7684\u5217\uff0c\u628a C C \u4e2d\u5bf9\u5e94\u7684\u5217\u6539\u6210\u76f8\u540c\u7684\u7b26\u53f7 \u65e0\u635f\u5206\u89e3\u7684\u5145\u5206\u5fc5\u8981\u6761\u4ef6\uff08\u53ea\u5bf9\u5143\u7d20\u4e2a\u6570\u4e3a2\u20e3\ufe0f\u7684\u5206\u89e3\u6709\u6548\uff09\uff1a R_{1}\\cup R_{2} \\to R_{1}-R_{2} R_{1}\\cup R_{2} \\to R_{1}-R_{2} \u6216 R_{1}\\cup R_{2} \\to R_{2}-R_{1} R_{1}\\cup R_{2} \\to R_{2}-R_{1} \u6d4b\u8bd5\u5206\u89e3 \\rho \\rho \u662f\u5426\u5177\u6709\u51fd\u6570\u4f9d\u8d56\u4fdd\u6301\u6027 \u5bf9\u4e8e z \\in F = \\{f_{0},f_{1},\u2026,f{n-1}\\} z \\in F = \\{f_{0},f_{1},\u2026,f{n-1}\\} \uff0c\u6c42 \\pi_z(F) = \\{X\\to Y | X\\to Y \\in F^+ \\and XY \\subseteq z\\} \\pi_z(F) = \\{X\\to Y | X\\to Y \\in F^+ \\and XY \\subseteq z\\} \u5982\u679c \\left[\\bigcup_{i=1}^k \\pi_{z_{i}}(F)\\right]^+ = F^+ \\left[\\bigcup_{i=1}^k \\pi_{z_{i}}(F)\\right]^+ = F^+ \u90a3\u4e48\u6210\u529f \u5173\u7cfb\u6a21\u5f0f\u7684\u8303\u5f0f intro\uff1a 1NF\uff1a\u4e0d\u5b58\u5728\u591a\u503c\u5c5e\u6027 BCNF\uff1aR\u4e2d\u6bcf\u4e2a\u5c5e\u6027\u90fd\u4e0d\u4f20\u9012\u4f9d\u8d56\u4e8eR\u7684\u5019\u9009\u952e F \u4e2d\u7684\u6bcf\u4e2a\u975e\u5e73\u51e1\u7684\u51fd\u6570\u4f9d\u8d56 X \u2192 Y\uff0c\u90fd\u6709 X\u662f R \u7684\u8d85\u952e \\rho \\rho ={R} \u68c0\u67e5 \\rho \\rho \u4e2d\u5404\u5173\u7cfb\u6a21\u5f0f\u662f\u5426\u5747\u5c5e\u4e8eBCNF\uff0c\u82e5\u662f\u7ed3\u675f \u8bbe \\rho \\rho \u4e2dRi(Ui)\u4e0d\u5c5e\u4e8eBCNF\uff0c\u90a3\u4e48\u5fc5\u6709X\u2192A\u2208Fi+\u4f46X\u975eRi\u7684\u8d85\u952e\uff0c\u5bf9Ri\u8fdb\u884c\u5206\u89e3 \u4e3a \\rho \\rho ={XA,U-{A}}\uff0cU=U-{A}\u8f6c\u5230(2) 2NF\uff1a\u975e\u4e3b\u5c5e\u6027\u5b8c\u5168\u4f9d\u8d56\u4e8e\u67d0\u4e2a\u5019\u9009\u952e 3NF\uff1a\u975e\u4e3b\u5c5e\u6027\u4e0d\u4f20\u9012\u4f9d\u8d56\u4e8e\u67d0\u4e2a\u5019\u9009\u952e \u6c42 F_{\\min} F_{\\min} \uff0c\u5408\u5e76\u5de6\u90e8\u76f8\u540c\u7684\u4f9d\u8d56 \u5bf9\u6bcf\u4e2a X\\to Y X\\to Y \u6784\u6210\u4e00\u4e2a\u6a21\u5f0f XY XY \u5982\u679c\u90fd\u4e0d\u5305\u542b\u5019\u9009\u952e\uff0c\u90a3\u4e48\u52a0\u5165\u5019\u9009\u952e \u597d\u7684\u6a21\u5f0f\u8bbe\u8ba1\u65b9\u6cd5\u5e94\u7b26\u5408\u4e09\u4e2a\u539f\u5219: \u8868\u8fbe\u6027 \u5206\u79bb\u6027 \u6700\u5c0f\u5197\u4f59 #From Prof.Li's slides, start here. \u7b2c\u4e03\u7ae0\uff1a\u6570\u636e\u5e93\u8bbe\u8ba1 \u6570\u636e\u5e93\u8bbe\u8ba1\u6982\u8ff0 \u6570\u636e\u5e93\u8bbe\u8ba1(Database Design\uff0c\u7b80\u79f0 DBD) \u662f\u6307\u5728**\u7ed9\u5b9a\u7684\u6216\u5f85\u5b9a\u7684\u8f6f\u786c\u4ef6\u73af\u5883**\u4e0b\uff0c\u9488\u5bf9**\u5b9e\u9645\u7684\u95ee\u9898\u548c\u7528\u6237\u9700\u6c42**\uff0c\u8bbe\u8ba1\u4e00\u4e2a\u8f83\u4f18\u7684**\u6570\u636e\u6a21\u578b**\uff0c\u5efa\u7acbDB\u7ed3\u6784\u548cDB\u5e94\u7528\u7cfb\u7edf \u8ba1\u7b97\u673a\u4fe1\u606f\u7cfb\u7edf\u4ee5**\u6570\u636e\u5e93**\u4e3a\u6838\u5fc3\uff0c\u5728**\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf**\u7684\u652f\u6301\u4e0b\uff0c \u8fdb\u884c\u4fe1\u606f\u7684**\u6536\u96c6\u3001\u6574\u7406\u3001\u5b58\u50a8\u3001\u68c0\u7d22\u3001\u66f4\u65b0\u3001\u52a0\u5de5\u3001\u7edf\u8ba1\u548c\u4f20\u64ad**\u7b49\u64cd\u4f5c\u3002 \u9700\u6c42\u5206\u6790 \u6b65\u9aa4\uff1a \u7528\u6237\u6d3b\u52a8\u56fe \u7cfb\u7edf\u8303\u56f4\u56fe \u6570\u636e\u6d41\u56fe \u6570\u636e\u5b57\u5178 ****\u9700\u8981fine-grain \u7b2c\u516b\u7ae0\uff1a\u6570\u636e\u5e93\u7ba1\u7406 \u4e8b\u7269\u6982\u5ff5 ACID\uff1a Atomicity\uff1a\u539f\u5b50\u6027 Consisitency\uff1a\u4e00\u81f4\u6027 Isolation\uff1a\u9694\u79bb\u6027 Durability\uff1a\u6301\u4e45\u6027 \u6545\u969c\u6062\u590d \u68c0\u67e5\u70b9\u673a\u5236\uff1a \u5728\u68c0\u67e5\u70b9\u65f6\u523b\u624d\u771f\u6b63\u505a\u5230\u628a\u5bf9DB\u7684\u4fee\u6539\u5199\u5230\u78c1\u76d8\uff0c\u5e76\u5728\u65e5\u5fd7\u6587\u4ef6\u5199\u5165\u4e00\u6761\u68c0\u67e5\u70b9\u8bb0\u5f55 \u68c0\u67e5\u70b9\u65b9\u6cd5\u7684\u6062\u590d\u7b97\u6cd5\uff1a \u4ece\u5934\u626b\u63cf\u65e5\u5fd7\u6587\u4ef6\uff0c\u627e\u5230\u6545\u969c\u53d1\u751f\u524d\u6700\u540e\u4e00\u4e2a\u68c0\u67e5\u70b9\u8bb0\u5f55 \u7531\u8be5\u68c0\u67e5\u70b9\u8bb0\u5f55\u5f97\u5230\u68c0\u67e5\u70b9\u5efa\u7acb\u65f6\u523b\u6240\u6709**\u6b63\u5728\u6267\u884c**\u7684\u4e8b\u52a1\u6e05\u5355\uff0c\u628a\u4ed6\u4eec\u6682\u65f6\u653e\u5165**\u64a4\u9500\u961f\u5217** \u4ece\u68c0\u67e5\u70b9\u5f00\u59cb\u6b63\u5411\u626b\u63cf\u65e5\u5fd7\u6587\u4ef6\uff0c\u5982\u6709**\u65b0\u5f00\u59cb\u4e8b\u52a1\u653e\u5165\u64a4\u9500\u961f\u5217**\uff1b\u5982\u6709**\u63d0\u4ea4\u7684\u4e8b\u52a1\u4ece\u64a4\u9500\u961f\u5217\u79fb\u5230\u91cd\u505a\u961f\u5217**\uff0c\u76f4\u5230\u65e5\u5fd7\u6587\u4ef6\u7ed3\u675f \u5bf9\u64a4\u9500\u961f\u5217\u7684\u6bcf\u4e2a\u4e8b\u52a1\u6267\u884cUNDO\u64cd\u4f5c\uff1b\u5bf9\u91cd\u505a\u961f\u5217\u7684\u6bcf\u4e2a\u4e8b\u52a1\u6267\u884cREDO\u64cd\u4f5c \u6570\u636e\u5e93\u7684\u5e76\u53d1\u63a7\u5236 \u5c01\u9501\u673a\u5236 X\u9501\uff1a\u5199\u9501\uff0cXFIND S\u9501\uff1a\u8bfb\u9501\uff0cSFIND\uff0cUPDX \u5e76\u53d1\u8c03\u5ea6\u53ef\u4e32\u884c\u5316 \u4e32\u884c\u8c03\u5ea6\uff1a\u8ba9\u591a\u4e2a\u4e8b\u7269\u4f9d\u6b21\u6267\u884c \u5e76\u53d1\u8c03\u5ea6 \u5982\u679c\u4e00\u4e2a\u5e76\u53d1\u8c03\u5ea6\u4e0e\u67d0\u4e00\u4e32\u884c\u8c03\u5ea6\u5177\u6709\u76f8\u540c\u7684\u6267\u884c\u7ed3\u679c\uff0c\u90a3\u4e48\u79f0\u8fd9\u4e2a\u5e76\u53d1\u8c03\u5ea6\u662f\"\u53ef\u4e32\u884c\u5316\u7684\u8c03\u5ea6\" \u89e6\u53d1\u5668 \u7528\u6237\u6743\u9650 ```mysql \u6388\u6743\u8bed\u53e5\uff1a GRANT <\u6743\u9650\u8868> ON <\u6570\u636e\u5e93\u5143\u7d20> TO <\u7528\u6237\u8868> [WITH GRANT OPTION] eg: GRANT SELECT, UPDATE ON S TO WANG WITH GRANT OPTION eg: GRANT REFERENCES (CNO) ON C TO BAO WITH GRANT OPTION eg: GRANT INSERT(SNO,PNO,JNO) ON SPJ TO LOU WITH GRANT OPTION \u56de\u6536\u8bed\u53e5\uff1a REVOKE <\u6743\u9650\u8868> ON <\u6570\u636e\u5e93\u5143\u7d20> FROM <\u7528\u6237\u8868> [RESTRICT | CASCADE] eg: REVOKE SELECT, UPDATE ON S FROM WANG CASCADE ``` \u5bf9\u8c61\u5173\u7cfb\u6570\u636e\u5e93 ORDBS\uff1aObject-Relational Database Systems\uff08SQL3\uff09 OODBS\uff1aObject-oriented databases ****\u672a\u5b8c..","title":"Database2"},{"location":"\u6570\u636e\u5e93\u539f\u7406(2)\u590d\u4e60/#_1","text":"","title":"\u89c4\u8303\u5316\u8bbe\u8ba1"},{"location":"\u6570\u636e\u5e93\u539f\u7406(2)\u590d\u4e60/#_2","text":"\u4e00\u4e2a\u5173\u7cfb\u6a21\u578b\u5305\u62ec\uff08\u5916\u5ef6\uff09\u548c\uff08\u5185\u6db5\uff09\u4e24\u4e2a\u65b9\u9762\u7684\u5185\u5bb9 \u5916\u5ef6\uff1a\u5173\u7cfb\u3001\u8868\u3001\u5f53\u524d\u503c \u5185\u6db5\uff1a\u5bf9\u6570\u636e\u7684\u5b9a\u4e49\u4ee5\u53ca\u5bf9\u6570\u636e\u5b8c\u6574\u6027\u7684\u7ea6\u675f \u5b9e\u9645\u4f7f\u7528\u65f6\uff0c\u7528\u5173\u7cfb\u6a21\u5f0f\u7684\u96c6\u5408 \\rho = \\{R_{1},..,R_{k}\\}\u6765\u4ee3\u66ffR(U) \\rho = \\{R_{1},..,R_{k}\\}\u6765\u4ee3\u66ffR(U) \uff0c \\rho \\rho \u79f0\u4e3a\u6570\u636e\u5e93\u7684\u6a21\u5f0f\uff0c\u5173\u7cfb r r \u662f R R \u7684\u4efb\u610f\u5177\u4f53\u503c\uff0c\u79f0\u4e3a\u6cdb\u5173\u7cfb\u6a21\u5f0f \u5173\u7cfb\u6a21\u5f0f\u7684\u5197\u4f59\u548c\u5f02\u5e38\u95ee\u9898\uff1a \u6570\u636e\u5197\u4f59\u5927 \u63d2\u5165\u3001\u4fee\u6539\u4e0e\u5220\u9664\u5f02\u5e38","title":"\u5173\u7cfb\u6a21\u5f0f\u7684\u8bbe\u8ba1\u95ee\u9898"},{"location":"\u6570\u636e\u5e93\u539f\u7406(2)\u590d\u4e60/#_3","text":"\u51fd\u6570\u4f9d\u8d56\u7684\u5b9a\u4e49\uff1a r r \u662f R R \u7684\u4efb\u4e00\u5177\u4f53\u5173\u7cfb\uff0c\u5bf9 r r \u7684\u4efb\u610f\u4e24\u4e2a\u5143\u7ec4 u u \u3001 v v \uff0c\u7531 u[x]=v[x] u[x]=v[x] \u5bfc\u81f4 u[y] = v[y] u[y] = v[y] \u90a3\u4e48 x \\to y x \\to y \u5019\u9009\u7801\u6c42\u89e3\u7b97\u6cd5 \u5c06R\u6240\u6709\u5c5e\u6027\u5206\u4e3aL\u3001R\u3001N\u3001LR\u56db\u7c7b\uff0c\u4ee4X = {L\u3001R}\uff0cY = {LR} \u6c42X\u7684\u95ed\u5305 \u5728Y\u4e2d\u9009\u53d6\u4efb\u610f\u7ec4\u5408\u5c5e\u6027 y_{i} y_{i} \uff0c\u6c42\u95ed\u5305 (Xy_{i}) (Xy_{i}) \u7684\u95ed\u5305 \u5c5e\u6027\u96c6\u95ed\u5305\u6c42\u89e3\u7b97\u6cd5\uff1a X_{0} = X X_{0} = X $X_(i+1) = X_{i} \\cup A,A\u4e3a\u4f7f\u7528X_{i}\u7684\u65b0\u589e\u4f9d\u8d56 $ \u82e5 X_{i+1} =X_{i} X_{i+1} =X_{i} \u9000\u51fa FD\u7684\u6700\u5c0f\u4f9d\u8d56\u96c6 \u4efb\u4e00\u51fd\u6570\u4ee5\u4f9d\u8d56\u53f3\u90e8\u4e3a\u5355\u5c5e\u6027 F\u4e2d\u4efb\u4e00\u51fd\u6570\u4f9d\u8d56 X\\to A X\\to A \uff0c\u4e0d\u5b58\u5728 F-\\{X\\to A\\} F-\\{X\\to A\\} \u7b49\u4e8e F F \uff1a\u6bcf\u4e2a\u51fd\u6570\u4f9d\u8d56\u5de6\u90e8\u6ca1\u6709\u591a\u4f59\u7684\u5c5e\u6027 F\u4e2d\u4efb\u4e00\u51fd\u6570\u4f9d\u8d56 X\\to A X\\to A \uff0cX\u7684\u4efb\u4e00\u771f\u5b50\u96c6Z\uff0c\u4e0d\u5b58\u5728 F-\\{X\\to A\\}\\cup\\{Z\\to A\\} F-\\{X\\to A\\}\\cup\\{Z\\to A\\} \u7b49\u4e8e F F \uff1a\u4e0d\u5b58\u5728\u591a\u4f59\u7684\u51fd\u6570\u4f9d\u8d56 \u6c42FD\u6700\u5c0f\u4f9d\u8d56\u96c6\u7684\u6b65\u9aa4\uff1a\u6ee1\u8db3FD\u6700\u5c0f\u4f9d\u8d56\u96c6\u7684\u5b9a\u4e49\u5373\u53ef \u6ee1\u8db3(1)\uff1a\u5e94\u7528\u5206\u89e3\u89c4\u5219 \u6ee1\u8db3(2)\uff1a\u5e94\u7528\u4f2a\u4f20\u9012 \u6ee1\u8db3(3)\uff1a\u5e94\u7528\u4f20\u9012\u6027","title":"\u51fd\u6570\u4f9d\u8d56"},{"location":"\u6570\u636e\u5e93\u539f\u7406(2)\u590d\u4e60/#_4","text":"\u65e0\u635f\u5206\u89e3\uff1a\u539f\u5173\u7cfb\u6a21\u5f0f\u4e0b\u7684\u4efb\u4e00\u5408\u6cd5\u5173\u7cfb\u5b9e\u4f8b\uff0c\u5728\u5206\u89e3\u540e\uff0c\u5e94\u80fd\u901a\u8fc7**\u81ea\u7136\u8fde\u63a5**\u8fd0\u7b97\u6062\u590d\u8d77\u6765\u3002 \u65e0\u635f\u5206\u89e3\u7684\u6d4b\u8bd5\u65b9\u6cd5\uff1a \u6784\u9020\u521d\u59cb\u8868 \u53cd\u590d\u68c0\u6d4b\uff1a\u82e5 A\\to C A\\to C \uff0c\u90a3\u4e48\u5c06 A A \u5217\u4e2d\u76f8\u540c\u7684\u5217\uff0c\u628a C C \u4e2d\u5bf9\u5e94\u7684\u5217\u6539\u6210\u76f8\u540c\u7684\u7b26\u53f7 \u65e0\u635f\u5206\u89e3\u7684\u5145\u5206\u5fc5\u8981\u6761\u4ef6\uff08\u53ea\u5bf9\u5143\u7d20\u4e2a\u6570\u4e3a2\u20e3\ufe0f\u7684\u5206\u89e3\u6709\u6548\uff09\uff1a R_{1}\\cup R_{2} \\to R_{1}-R_{2} R_{1}\\cup R_{2} \\to R_{1}-R_{2} \u6216 R_{1}\\cup R_{2} \\to R_{2}-R_{1} R_{1}\\cup R_{2} \\to R_{2}-R_{1} \u6d4b\u8bd5\u5206\u89e3 \\rho \\rho \u662f\u5426\u5177\u6709\u51fd\u6570\u4f9d\u8d56\u4fdd\u6301\u6027 \u5bf9\u4e8e z \\in F = \\{f_{0},f_{1},\u2026,f{n-1}\\} z \\in F = \\{f_{0},f_{1},\u2026,f{n-1}\\} \uff0c\u6c42 \\pi_z(F) = \\{X\\to Y | X\\to Y \\in F^+ \\and XY \\subseteq z\\} \\pi_z(F) = \\{X\\to Y | X\\to Y \\in F^+ \\and XY \\subseteq z\\} \u5982\u679c \\left[\\bigcup_{i=1}^k \\pi_{z_{i}}(F)\\right]^+ = F^+ \\left[\\bigcup_{i=1}^k \\pi_{z_{i}}(F)\\right]^+ = F^+ \u90a3\u4e48\u6210\u529f","title":"\u5173\u7cfb\u6a21\u5f0f\u7684\u5206\u89e3\u7279\u6027"},{"location":"\u6570\u636e\u5e93\u539f\u7406(2)\u590d\u4e60/#_5","text":"intro\uff1a 1NF\uff1a\u4e0d\u5b58\u5728\u591a\u503c\u5c5e\u6027 BCNF\uff1aR\u4e2d\u6bcf\u4e2a\u5c5e\u6027\u90fd\u4e0d\u4f20\u9012\u4f9d\u8d56\u4e8eR\u7684\u5019\u9009\u952e F \u4e2d\u7684\u6bcf\u4e2a\u975e\u5e73\u51e1\u7684\u51fd\u6570\u4f9d\u8d56 X \u2192 Y\uff0c\u90fd\u6709 X\u662f R \u7684\u8d85\u952e \\rho \\rho ={R} \u68c0\u67e5 \\rho \\rho \u4e2d\u5404\u5173\u7cfb\u6a21\u5f0f\u662f\u5426\u5747\u5c5e\u4e8eBCNF\uff0c\u82e5\u662f\u7ed3\u675f \u8bbe \\rho \\rho \u4e2dRi(Ui)\u4e0d\u5c5e\u4e8eBCNF\uff0c\u90a3\u4e48\u5fc5\u6709X\u2192A\u2208Fi+\u4f46X\u975eRi\u7684\u8d85\u952e\uff0c\u5bf9Ri\u8fdb\u884c\u5206\u89e3 \u4e3a \\rho \\rho ={XA,U-{A}}\uff0cU=U-{A}\u8f6c\u5230(2) 2NF\uff1a\u975e\u4e3b\u5c5e\u6027\u5b8c\u5168\u4f9d\u8d56\u4e8e\u67d0\u4e2a\u5019\u9009\u952e 3NF\uff1a\u975e\u4e3b\u5c5e\u6027\u4e0d\u4f20\u9012\u4f9d\u8d56\u4e8e\u67d0\u4e2a\u5019\u9009\u952e \u6c42 F_{\\min} F_{\\min} \uff0c\u5408\u5e76\u5de6\u90e8\u76f8\u540c\u7684\u4f9d\u8d56 \u5bf9\u6bcf\u4e2a X\\to Y X\\to Y \u6784\u6210\u4e00\u4e2a\u6a21\u5f0f XY XY \u5982\u679c\u90fd\u4e0d\u5305\u542b\u5019\u9009\u952e\uff0c\u90a3\u4e48\u52a0\u5165\u5019\u9009\u952e \u597d\u7684\u6a21\u5f0f\u8bbe\u8ba1\u65b9\u6cd5\u5e94\u7b26\u5408\u4e09\u4e2a\u539f\u5219: \u8868\u8fbe\u6027 \u5206\u79bb\u6027 \u6700\u5c0f\u5197\u4f59 #From Prof.Li's slides, start here.","title":"\u5173\u7cfb\u6a21\u5f0f\u7684\u8303\u5f0f"},{"location":"\u6570\u636e\u5e93\u539f\u7406(2)\u590d\u4e60/#_6","text":"","title":"\u7b2c\u4e03\u7ae0\uff1a\u6570\u636e\u5e93\u8bbe\u8ba1"},{"location":"\u6570\u636e\u5e93\u539f\u7406(2)\u590d\u4e60/#_7","text":"\u6570\u636e\u5e93\u8bbe\u8ba1(Database Design\uff0c\u7b80\u79f0 DBD) \u662f\u6307\u5728**\u7ed9\u5b9a\u7684\u6216\u5f85\u5b9a\u7684\u8f6f\u786c\u4ef6\u73af\u5883**\u4e0b\uff0c\u9488\u5bf9**\u5b9e\u9645\u7684\u95ee\u9898\u548c\u7528\u6237\u9700\u6c42**\uff0c\u8bbe\u8ba1\u4e00\u4e2a\u8f83\u4f18\u7684**\u6570\u636e\u6a21\u578b**\uff0c\u5efa\u7acbDB\u7ed3\u6784\u548cDB\u5e94\u7528\u7cfb\u7edf \u8ba1\u7b97\u673a\u4fe1\u606f\u7cfb\u7edf\u4ee5**\u6570\u636e\u5e93**\u4e3a\u6838\u5fc3\uff0c\u5728**\u6570\u636e\u5e93\u7ba1\u7406\u7cfb\u7edf**\u7684\u652f\u6301\u4e0b\uff0c \u8fdb\u884c\u4fe1\u606f\u7684**\u6536\u96c6\u3001\u6574\u7406\u3001\u5b58\u50a8\u3001\u68c0\u7d22\u3001\u66f4\u65b0\u3001\u52a0\u5de5\u3001\u7edf\u8ba1\u548c\u4f20\u64ad**\u7b49\u64cd\u4f5c\u3002","title":"\u6570\u636e\u5e93\u8bbe\u8ba1\u6982\u8ff0"},{"location":"\u6570\u636e\u5e93\u539f\u7406(2)\u590d\u4e60/#_8","text":"\u6b65\u9aa4\uff1a \u7528\u6237\u6d3b\u52a8\u56fe \u7cfb\u7edf\u8303\u56f4\u56fe \u6570\u636e\u6d41\u56fe \u6570\u636e\u5b57\u5178 ****\u9700\u8981fine-grain","title":"\u9700\u6c42\u5206\u6790"},{"location":"\u6570\u636e\u5e93\u539f\u7406(2)\u590d\u4e60/#_9","text":"","title":"\u7b2c\u516b\u7ae0\uff1a\u6570\u636e\u5e93\u7ba1\u7406"},{"location":"\u6570\u636e\u5e93\u539f\u7406(2)\u590d\u4e60/#_10","text":"ACID\uff1a Atomicity\uff1a\u539f\u5b50\u6027 Consisitency\uff1a\u4e00\u81f4\u6027 Isolation\uff1a\u9694\u79bb\u6027 Durability\uff1a\u6301\u4e45\u6027","title":"\u4e8b\u7269\u6982\u5ff5"},{"location":"\u6570\u636e\u5e93\u539f\u7406(2)\u590d\u4e60/#_11","text":"\u68c0\u67e5\u70b9\u673a\u5236\uff1a \u5728\u68c0\u67e5\u70b9\u65f6\u523b\u624d\u771f\u6b63\u505a\u5230\u628a\u5bf9DB\u7684\u4fee\u6539\u5199\u5230\u78c1\u76d8\uff0c\u5e76\u5728\u65e5\u5fd7\u6587\u4ef6\u5199\u5165\u4e00\u6761\u68c0\u67e5\u70b9\u8bb0\u5f55 \u68c0\u67e5\u70b9\u65b9\u6cd5\u7684\u6062\u590d\u7b97\u6cd5\uff1a \u4ece\u5934\u626b\u63cf\u65e5\u5fd7\u6587\u4ef6\uff0c\u627e\u5230\u6545\u969c\u53d1\u751f\u524d\u6700\u540e\u4e00\u4e2a\u68c0\u67e5\u70b9\u8bb0\u5f55 \u7531\u8be5\u68c0\u67e5\u70b9\u8bb0\u5f55\u5f97\u5230\u68c0\u67e5\u70b9\u5efa\u7acb\u65f6\u523b\u6240\u6709**\u6b63\u5728\u6267\u884c**\u7684\u4e8b\u52a1\u6e05\u5355\uff0c\u628a\u4ed6\u4eec\u6682\u65f6\u653e\u5165**\u64a4\u9500\u961f\u5217** \u4ece\u68c0\u67e5\u70b9\u5f00\u59cb\u6b63\u5411\u626b\u63cf\u65e5\u5fd7\u6587\u4ef6\uff0c\u5982\u6709**\u65b0\u5f00\u59cb\u4e8b\u52a1\u653e\u5165\u64a4\u9500\u961f\u5217**\uff1b\u5982\u6709**\u63d0\u4ea4\u7684\u4e8b\u52a1\u4ece\u64a4\u9500\u961f\u5217\u79fb\u5230\u91cd\u505a\u961f\u5217**\uff0c\u76f4\u5230\u65e5\u5fd7\u6587\u4ef6\u7ed3\u675f \u5bf9\u64a4\u9500\u961f\u5217\u7684\u6bcf\u4e2a\u4e8b\u52a1\u6267\u884cUNDO\u64cd\u4f5c\uff1b\u5bf9\u91cd\u505a\u961f\u5217\u7684\u6bcf\u4e2a\u4e8b\u52a1\u6267\u884cREDO\u64cd\u4f5c","title":"\u6545\u969c\u6062\u590d"},{"location":"\u6570\u636e\u5e93\u539f\u7406(2)\u590d\u4e60/#_12","text":"\u5c01\u9501\u673a\u5236 X\u9501\uff1a\u5199\u9501\uff0cXFIND S\u9501\uff1a\u8bfb\u9501\uff0cSFIND\uff0cUPDX \u5e76\u53d1\u8c03\u5ea6\u53ef\u4e32\u884c\u5316 \u4e32\u884c\u8c03\u5ea6\uff1a\u8ba9\u591a\u4e2a\u4e8b\u7269\u4f9d\u6b21\u6267\u884c \u5e76\u53d1\u8c03\u5ea6 \u5982\u679c\u4e00\u4e2a\u5e76\u53d1\u8c03\u5ea6\u4e0e\u67d0\u4e00\u4e32\u884c\u8c03\u5ea6\u5177\u6709\u76f8\u540c\u7684\u6267\u884c\u7ed3\u679c\uff0c\u90a3\u4e48\u79f0\u8fd9\u4e2a\u5e76\u53d1\u8c03\u5ea6\u662f\"\u53ef\u4e32\u884c\u5316\u7684\u8c03\u5ea6\" \u89e6\u53d1\u5668 \u7528\u6237\u6743\u9650 ```mysql \u6388\u6743\u8bed\u53e5\uff1a GRANT <\u6743\u9650\u8868> ON <\u6570\u636e\u5e93\u5143\u7d20> TO <\u7528\u6237\u8868> [WITH GRANT OPTION] eg: GRANT SELECT, UPDATE ON S TO WANG WITH GRANT OPTION eg: GRANT REFERENCES (CNO) ON C TO BAO WITH GRANT OPTION eg: GRANT INSERT(SNO,PNO,JNO) ON SPJ TO LOU WITH GRANT OPTION \u56de\u6536\u8bed\u53e5\uff1a REVOKE <\u6743\u9650\u8868> ON <\u6570\u636e\u5e93\u5143\u7d20> FROM <\u7528\u6237\u8868> [RESTRICT | CASCADE] eg: REVOKE SELECT, UPDATE ON S FROM WANG CASCADE ```","title":"\u6570\u636e\u5e93\u7684\u5e76\u53d1\u63a7\u5236"},{"location":"\u6570\u636e\u5e93\u539f\u7406(2)\u590d\u4e60/#_13","text":"ORDBS\uff1aObject-Relational Database Systems\uff08SQL3\uff09 OODBS\uff1aObject-oriented databases ****\u672a\u5b8c..","title":"\u5bf9\u8c61\u5173\u7cfb\u6570\u636e\u5e93"},{"location":"\u914d\u7f6eNgrok\u670d\u52a1\u5668\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f/","text":"\u914d\u7f6eNgrok\u670d\u52a1\u5668\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f \u5982\u679c\u4f60\u6709\u4e00\u53f0\u7535\u8111\uff0c\u5e0c\u671b\u80fd\u4ece\u516c\u7f51\u8bbf\u95ee\uff0c\u90a3\u4e48\u4f60\u5c31\u9700\u8981ngrok\u8fdb\u884c\u5185\u7f51\u7a7f\u900f \u524d\u671f\u51c6\u5907 VPS\uff0c\u6216\u8005\u670d\u52a1\u5668\uff0c\u6709\u516c\u7f51IP \u5df2\u5907\u6848\u57df\u540d 64\u4f4d Centos6 \u914d\u7f6e\u57df\u540d\u89e3\u6790 \u628a ngrok \u548c *.ngrok \u90fd\u89e3\u6790\u5230\u4f60\u7684VPS\u7684IP\u5730\u5740\u4e0a\uff0c\u5176\u4e2d\u8bb0\u5f55\u7c7b\u578b\u4e3a A \u5b89\u88c5\u51c6\u5907 \u5b89\u88c5GO 1 . \u5982\u679c\u652f\u6301 yum install golang 2 . \u4e0d\u652f\u6301 wget https://storage.googleapis.com/golang/go1.8.3.linux-amd64.tar.gz tar -C /usr/local -xzf go1.8.3.linux-amd64.tar.gz vim /etc/profile //\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a export PATH = $PATH :/usr/local/go/bin source /etc/profile //\u68c0\u6d4b\u662f\u5426\u5b89\u88c5\u6210\u529fgo go version \u4e0b\u8f7dngrok\u6e90\u7801 mkdir /ngrok cd /ngrok git clone https://github.com/inconshreveable/ngrok.git \u5b89\u88c5\u8bc1\u4e66 export NGROKURL = \"///\u4f60\u81ea\u5df1\u7684url///\u6bd4\u5982[ngork.myurl.com]\" cd /root/ngrok openssl genrsa -out rootCA.key 2048 openssl req -x509 -new -nodes -key rootCA.key -subj \"/CN= $NGROKURL \" -days 5000 -out rootCA.pem openssl genrsa -out device.key 2048 openssl req -new -key device.key -subj \"/CN= $NGROKURL \" -out device.csr openssl x509 -req -in device.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out device.crt -days 5000 \u4fee\u6539\u8bc1\u4e66\u4f4d\u7f6e cp rootCA.pem assets/client/tls/ngrokroot.crt #\u4f1a\u8be2\u95ee\u662f\u5426\u8986\u76d6\uff0c\u4e00\u5b9a\u8981\u5199 y \u518d\u786e\u8ba4\uff0c\u5426\u5219\u65e0\u6cd5\u8986\u76d6 cp device.crt assets/server/tls/snakeoil.crt #\u4f1a\u8be2\u95ee\u662f\u5426\u8986\u76d6\uff0c\u4e00\u5b9a\u8981\u5199 y \u518d\u786e\u8ba4\uff0c\u5426\u5219\u65e0\u6cd5\u8986\u76d6 cp device.key assets/server/tls/snakeoil.key #\u4f1a\u8be2\u95ee\u662f\u5426\u8986\u76d6\uff0c\u4e00\u5b9a\u8981\u5199 y \u518d\u786e\u8ba4\uff0c\u5426\u5219\u65e0\u6cd5\u8986\u76d6 \u7f16\u8bd1 #\u628a/usr/local/go/bin\u76ee\u5f55\u4e0b\u7684 go-bindata \u62f7\u8d1d\u5230/root/ngrok/bin\u4e0b cp /usr/local/go/bin/go-bindata /root/ngrok/bin/ \u7f16\u8bd1\u670d\u52a1\u7aef make release-server \u7f16\u8bd1\u5b8c\u6210\u540e\u4f1a\u5b58\u5728/root/ngrok/bin/ngrokd \u7f16\u8bd1\u5ba2\u6237\u7aef GOOS = xxx GOARCH = xxx make release-client #Linux \u5e73\u53f0 32 \u4f4d\u7cfb\u7edf\uff1aGOOS=linux GOARCH=386 #Linux \u5e73\u53f0 64 \u4f4d\u7cfb\u7edf\uff1aGOOS=linux GOARCH=amd64 #Windows \u5e73\u53f0 32 \u4f4d\u7cfb\u7edf\uff1aGOOS=windows GOARCH=386 #Windows \u5e73\u53f0 64 \u4f4d\u7cfb\u7edf\uff1aGOOS=windows GOARCH=amd64 #MAC \u5e73\u53f0 32 \u4f4d\u7cfb\u7edf\uff1aGOOS=darwin GOARCH=386 #MAC \u5e73\u53f0 64 \u4f4d\u7cfb\u7edf\uff1aGOOS=darwin GOARCH=amd64 #ARM \u5e73\u53f0\uff1aGOOS=linux GOARCH=arm \u7f16\u8bd1\u5b8c\u6210\u540e\u4f1a\u5b58\u5728/root/ngrok/bin/xxxx[\u4f60\u7684\u5e73\u53f0]/ngrok \u542f\u52a8\u670d\u52a1\u5668 cd bin ./ngrokd -domain = $NGROKURL -httpAddr = \":8088\" -httpsAddr = \":8089\" #tunnel\u9ed8\u8ba44443 \u542f\u52a8\u5ba2\u6237\u7aef \u521b\u5efa ngrok.cfg server_addr: \"///\u4f60\u81ea\u5df1\u7684url///\u6bd4\u5982[ngork.myurl.com]\" trust_host_root_certs: false \u542f\u52a8 ngrok -subdomain =[ \u4f60\u7684\u672c\u5730\u670d\u52a1\u540d \uff0c \u4e0d\u5199\u4f1a\u81ea\u52a8\u751f\u6210 ] -config = ngrok . cfg -log = ngrok . log 8888 [ \u4f60\u672c\u5730\u7684\u7aef\u53e3\u53f7 ] \u5982\u679c\u662fwindows\u53ef\u4ee5\u521b\u5efa start.bat @echo on cd % cd % #ngrok -proto=tcp 22 #ngrok start web ngrok -subdomain =[ \u4f60\u7684\u672c\u5730\u670d\u52a1\u540d \uff0c \u4e0d\u5199\u4f1a\u81ea\u52a8\u751f\u6210 ] -config = ngrok . cfg -log = ngrok . log 8888 [ \u4f60\u672c\u5730\u7684\u7aef\u53e3\u53f7 ]","title":"\u914d\u7f6eNgrok\u670d\u52a1\u5668"},{"location":"\u914d\u7f6eNgrok\u670d\u52a1\u5668\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f/#ngrok","text":"\u5982\u679c\u4f60\u6709\u4e00\u53f0\u7535\u8111\uff0c\u5e0c\u671b\u80fd\u4ece\u516c\u7f51\u8bbf\u95ee\uff0c\u90a3\u4e48\u4f60\u5c31\u9700\u8981ngrok\u8fdb\u884c\u5185\u7f51\u7a7f\u900f","title":"\u914d\u7f6eNgrok\u670d\u52a1\u5668\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f"},{"location":"\u914d\u7f6eNgrok\u670d\u52a1\u5668\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f/#_1","text":"VPS\uff0c\u6216\u8005\u670d\u52a1\u5668\uff0c\u6709\u516c\u7f51IP \u5df2\u5907\u6848\u57df\u540d 64\u4f4d Centos6","title":"\u524d\u671f\u51c6\u5907"},{"location":"\u914d\u7f6eNgrok\u670d\u52a1\u5668\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f/#_2","text":"\u628a ngrok \u548c *.ngrok \u90fd\u89e3\u6790\u5230\u4f60\u7684VPS\u7684IP\u5730\u5740\u4e0a\uff0c\u5176\u4e2d\u8bb0\u5f55\u7c7b\u578b\u4e3a A","title":"\u914d\u7f6e\u57df\u540d\u89e3\u6790"},{"location":"\u914d\u7f6eNgrok\u670d\u52a1\u5668\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f/#_3","text":"","title":"\u5b89\u88c5\u51c6\u5907"},{"location":"\u914d\u7f6eNgrok\u670d\u52a1\u5668\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f/#go","text":"1 . \u5982\u679c\u652f\u6301 yum install golang 2 . \u4e0d\u652f\u6301 wget https://storage.googleapis.com/golang/go1.8.3.linux-amd64.tar.gz tar -C /usr/local -xzf go1.8.3.linux-amd64.tar.gz vim /etc/profile //\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff1a export PATH = $PATH :/usr/local/go/bin source /etc/profile //\u68c0\u6d4b\u662f\u5426\u5b89\u88c5\u6210\u529fgo go version","title":"\u5b89\u88c5GO"},{"location":"\u914d\u7f6eNgrok\u670d\u52a1\u5668\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f/#ngrok_1","text":"mkdir /ngrok cd /ngrok git clone https://github.com/inconshreveable/ngrok.git","title":"\u4e0b\u8f7dngrok\u6e90\u7801"},{"location":"\u914d\u7f6eNgrok\u670d\u52a1\u5668\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f/#_4","text":"export NGROKURL = \"///\u4f60\u81ea\u5df1\u7684url///\u6bd4\u5982[ngork.myurl.com]\" cd /root/ngrok openssl genrsa -out rootCA.key 2048 openssl req -x509 -new -nodes -key rootCA.key -subj \"/CN= $NGROKURL \" -days 5000 -out rootCA.pem openssl genrsa -out device.key 2048 openssl req -new -key device.key -subj \"/CN= $NGROKURL \" -out device.csr openssl x509 -req -in device.csr -CA rootCA.pem -CAkey rootCA.key -CAcreateserial -out device.crt -days 5000","title":"\u5b89\u88c5\u8bc1\u4e66"},{"location":"\u914d\u7f6eNgrok\u670d\u52a1\u5668\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f/#_5","text":"cp rootCA.pem assets/client/tls/ngrokroot.crt #\u4f1a\u8be2\u95ee\u662f\u5426\u8986\u76d6\uff0c\u4e00\u5b9a\u8981\u5199 y \u518d\u786e\u8ba4\uff0c\u5426\u5219\u65e0\u6cd5\u8986\u76d6 cp device.crt assets/server/tls/snakeoil.crt #\u4f1a\u8be2\u95ee\u662f\u5426\u8986\u76d6\uff0c\u4e00\u5b9a\u8981\u5199 y \u518d\u786e\u8ba4\uff0c\u5426\u5219\u65e0\u6cd5\u8986\u76d6 cp device.key assets/server/tls/snakeoil.key #\u4f1a\u8be2\u95ee\u662f\u5426\u8986\u76d6\uff0c\u4e00\u5b9a\u8981\u5199 y \u518d\u786e\u8ba4\uff0c\u5426\u5219\u65e0\u6cd5\u8986\u76d6","title":"\u4fee\u6539\u8bc1\u4e66\u4f4d\u7f6e"},{"location":"\u914d\u7f6eNgrok\u670d\u52a1\u5668\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f/#_6","text":"#\u628a/usr/local/go/bin\u76ee\u5f55\u4e0b\u7684 go-bindata \u62f7\u8d1d\u5230/root/ngrok/bin\u4e0b cp /usr/local/go/bin/go-bindata /root/ngrok/bin/","title":"\u7f16\u8bd1"},{"location":"\u914d\u7f6eNgrok\u670d\u52a1\u5668\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f/#_7","text":"make release-server \u7f16\u8bd1\u5b8c\u6210\u540e\u4f1a\u5b58\u5728/root/ngrok/bin/ngrokd","title":"\u7f16\u8bd1\u670d\u52a1\u7aef"},{"location":"\u914d\u7f6eNgrok\u670d\u52a1\u5668\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f/#_8","text":"GOOS = xxx GOARCH = xxx make release-client #Linux \u5e73\u53f0 32 \u4f4d\u7cfb\u7edf\uff1aGOOS=linux GOARCH=386 #Linux \u5e73\u53f0 64 \u4f4d\u7cfb\u7edf\uff1aGOOS=linux GOARCH=amd64 #Windows \u5e73\u53f0 32 \u4f4d\u7cfb\u7edf\uff1aGOOS=windows GOARCH=386 #Windows \u5e73\u53f0 64 \u4f4d\u7cfb\u7edf\uff1aGOOS=windows GOARCH=amd64 #MAC \u5e73\u53f0 32 \u4f4d\u7cfb\u7edf\uff1aGOOS=darwin GOARCH=386 #MAC \u5e73\u53f0 64 \u4f4d\u7cfb\u7edf\uff1aGOOS=darwin GOARCH=amd64 #ARM \u5e73\u53f0\uff1aGOOS=linux GOARCH=arm \u7f16\u8bd1\u5b8c\u6210\u540e\u4f1a\u5b58\u5728/root/ngrok/bin/xxxx[\u4f60\u7684\u5e73\u53f0]/ngrok","title":"\u7f16\u8bd1\u5ba2\u6237\u7aef"},{"location":"\u914d\u7f6eNgrok\u670d\u52a1\u5668\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f/#_9","text":"cd bin ./ngrokd -domain = $NGROKURL -httpAddr = \":8088\" -httpsAddr = \":8089\" #tunnel\u9ed8\u8ba44443","title":"\u542f\u52a8\u670d\u52a1\u5668"},{"location":"\u914d\u7f6eNgrok\u670d\u52a1\u5668\u5b9e\u73b0\u5185\u7f51\u7a7f\u900f/#_10","text":"\u521b\u5efa ngrok.cfg server_addr: \"///\u4f60\u81ea\u5df1\u7684url///\u6bd4\u5982[ngork.myurl.com]\" trust_host_root_certs: false \u542f\u52a8 ngrok -subdomain =[ \u4f60\u7684\u672c\u5730\u670d\u52a1\u540d \uff0c \u4e0d\u5199\u4f1a\u81ea\u52a8\u751f\u6210 ] -config = ngrok . cfg -log = ngrok . log 8888 [ \u4f60\u672c\u5730\u7684\u7aef\u53e3\u53f7 ] \u5982\u679c\u662fwindows\u53ef\u4ee5\u521b\u5efa start.bat @echo on cd % cd % #ngrok -proto=tcp 22 #ngrok start web ngrok -subdomain =[ \u4f60\u7684\u672c\u5730\u670d\u52a1\u540d \uff0c \u4e0d\u5199\u4f1a\u81ea\u52a8\u751f\u6210 ] -config = ngrok . cfg -log = ngrok . log 8888 [ \u4f60\u672c\u5730\u7684\u7aef\u53e3\u53f7 ]","title":"\u542f\u52a8\u5ba2\u6237\u7aef"}]}